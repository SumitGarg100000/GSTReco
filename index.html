<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="TDS Calculator for FY 2025-26/AY 2026-27 aligned with Form 16.">
    <title>TDS on Salary Calculator - FY 2025-26</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #0e4377;
            --secondary-color: #1a73e8;
            --text-light: #FFFFFF;
            --text-dark: #2C3E50;
            --table-header: #1a73e8;
            --table-row-alt: #F8F9FA;
        }
        body {
            font-family: 'Montserrat', sans-serif;
            line-height: 1.6;
            background-color: #f0f8ff;
            color: var(--text-dark);
            padding-bottom: 2rem;
        }
        header {
            background: linear-gradient(145deg, var(--primary-color), var(--secondary-color));
            color: var(--text-light);
            padding: 2rem;
            text-align: center;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .card-header {
            border-bottom: 1px solid #eaeaea;
            padding-bottom: 1rem;
            margin-bottom: 1.5rem;
        }
        .card-header h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary-color);
        }
        .form-group {
            margin-bottom: 1rem;
        }
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        input[type="number"],
        input[type="text"],
        select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #1a73e8;
            border-radius: 8px;
            font-size: 0.9rem;
            background: #f5f9ff;
        }
        input[type="number"]:focus,
        input[type="text"]:focus,
        select:focus {
            border-color: #0d47a1;
            outline: none;
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.2);
        }
        .button {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            background: linear-gradient(145deg, #1a73e8, #0d47a1);
            color: white;
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        .flex-row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -0.5rem;
        }
        .col {
            padding: 0 0.5rem;
            flex: 1;
            min-width: 250px;
        }
        .result-table {
            width: 100%;
            border-collapse: collapse;
        }
        .result-table th,
        .result-table td {
            padding: 0.75rem;
            text-align: left;
            border: 1px solid #E0E0E0;
        }
        .result-table th {
            background-color: var(--table-header);
            color: white;
            font-size: 0.85rem;
        }
        .result-table tr:nth-child(even) {
            background-color: var(--table-row-alt);
        }
        .summary-box {
            background: linear-gradient(145deg, #1a73e8, #0d47a1);
            color: white;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }
        .chart-container {
            height: 300px;
            margin: 2rem 0;
        }
        footer {
            background: linear-gradient(145deg, #0e4377, #1a5fb4);
            color: var(--text-light);
            padding: 1.5rem;
            text-align: center;
        }
        @media (max-width: 768px) {
            .col { flex: 100%; }
            .button { width: 100%; }
        }
    </style>
</head>
<body>
    <header>
        <h1>TDS on Salary Calculator</h1>
        <h2>FY 2025-26 (AY 2026-27)</h2>
        <div class="container">
            <button class="button" onclick="resetValues()">Reset</button>
            <button class="button" onclick="printAsPDF()">Print as PDF</button>
        </div>
    </header>

    <div class="container">
        <!-- Basic Details -->
        <div class="card">
            <div class="card-header"><h3>Basic Details</h3></div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="employee_name">Name</label>
                        <input type="text" id="employee_name" placeholder="Enter employee name">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="pan_number">PAN Number</label>
                        <input type="text" id="pan_number" placeholder="Enter PAN number">
                    </div>
                </div>
            </div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="employee_age">Age</label>
                        <input type="number" id="age" placeholder="Enter age" min="18" value="30">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="tax_scheme">Tax Regime</label>
                        <select id="tax_scheme">
                            <option value="new">New Tax Regime (Default)</option>
                            <option value="old">Old Tax Regime</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Salary Details (Annual) -->
        <div class="card">
            <div class="card-header"><h3>Salary Income (Annual)</h3></div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="basic_salary">Basic Salary</label>
                        <input type="number" id="basicsalary" placeholder="Enter basic salary" min="0">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="hra_salary">HRA</label>
                        <input type="number" id="hra" placeholder="Enter HRA" min="0">
                    </div>
                </div>
            </div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="bonus_incentive">Bonus/Incentive</label>
                        <input type="number" id="bonus" placeholder="Enter bonus" min="0">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="special_allowance">Special Allowance</label>
                        <input type="number" id="specialallowance" placeholder="Enter special allowance" min="0">
                    </div>
                </div>
            </div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="otherallowance">Other Allowance</label>
                        <input type="number" id="other_allowance" placeholder="Enter other allowance" min="0">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="hra_exemption">HRA Exemption u/s 10(13A)</label>
                        <input type="number" id="exemptionsec13a" placeholder="Enter HRA exemption amount" min="0">
                    </div>
                </div>
            </div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="exempt_allowance">Exempt Allowance (e.g., Conveyance)</label>
                        <input type="number" id="otherexemption" placeholder="Enter exempt allowance" min="0">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="professional_tax">Professional Tax Paid</label>
                        <input type="number" id="professionaltax" placeholder="Enter professional tax" min="0" value="2400">
                    </div>
                </div>
            </div>
        </div>

        <!-- House Property -->
        <div class="card">
            <div class="card-header"><h3>House Property</h3></div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="property_type">Property Type</label>
                        <select id="property_type">
                            <option value="self-occupied">Self-Occupied</option>
                            <option value="let-out">Let-Out</option>
                        </select>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="interestself">Interest on Housing Loan(Self-occupied)</label>
                        <input type="number" id="interestself" placeholder="Enter interest (max 2 lakh)" min="0">
                   <label for="interestletout">Interest on Housing Loan(Let out)</label>
                        <input type="number" id="interestletout" placeholder="Enter interest (max 2 lakh)" min="0">
                   
                    </div>
                </div>
            </div>
        </div>

        <!-- Other Income -->
        <div class="card">
            <div class="card-header"><h3>Income from Other Sources</h3></div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="other_income">Other Income (e.g., Interest, Dividends)</label>
                        <input type="number" id="otherincome" placeholder="Enter other income" min="0">
                    </div>
                </div>
            </div>
        </div>

        <!-- Deductions (Old Regime) -->
        <div class="card" id="old-regime-deductions" style="display: none;">
            <div class="card-header"><h3>Deductions (Old Tax Regime)</h3></div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="section_80c">Section 80C Investments</label>
                        <input type="number" id="deduction80c" placeholder="Max 1.5 lakh (combined)" min="0">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="section_80ccc">Section 80CCC (Pension Plans)</label>
                        <input type="number" id="deduction80ccc" placeholder="Max 1.5 lakh (combined)" min="0">
                    </div>
                </div>
            </div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="section_80ccd1">Section 80CCD(1) (NPS Employee)</label>
                        <input type="number" id="deduction80ccd1" placeholder="Max 1.5 lakh (combined)" min="0">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="section_80ccd1b">Section 80CCD(1B) (Additional NPS)</label>
                        <input type="number" id="deduction80ccd1b" placeholder="Max 50,000" min="0">
                    </div>
                </div>
            </div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="section_80ccd2">Section 80CCD(2) (NPS Employer)</label>
                        <input type="number" id="deduction80ccd2" placeholder="Max 10% of salary" min="0">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="section_80d">Section 80D (Health Insurance)</label>
                        <input type="number" id="deduction80d" placeholder="Max 25,000/50,000" min="0">
                    </div>
                </div>
            </div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="section_80e">Section 80E (Education Loan Interest)</label>
                        <input type="number" id="deduction80e" placeholder="Enter education loan interest" min="0">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="section_80g">Section 80G (Donations)</label>
                        <input type="number" id="deduction80g" placeholder="Enter donation amount" min="0">
                    </div>
                </div>
            </div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="section_80tta">Section 80TTA/80TTB (Savings Interest)</label>
                        <input type="number" id="deduction80tta" placeholder="Max 10,000/50,000" min="0">
                    </div>
                </div>
            </div>
        </div>

        <!-- Month-Wise TDS Deducted -->
        <div class="card">
            <div class="card-header"><h3>Month-Wise TDS Deducted</h3></div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="tds_apr">April</label>
                        <input type="number" id="tds_apr" placeholder="Enter April TDS" min="0">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="tds_may">May</label>
                        <input type="number" id="tds_may" placeholder="Enter May TDS" min="0">
                    </div>
                </div>
            </div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="tds_jun">June</label>
                        <input type="number" id="tds_jun" placeholder="Enter June TDS" min="0">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="tds_jul">July</label>
                        <input type="number" id="tds_jul" placeholder="Enter July TDS" min="0">
                    </div>
                </div>
            </div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="tds_aug">August</label>
                        <input type="number" id="tds_aug" placeholder="Enter August TDS" min="0">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="tds_sep">September</label>
                        <input type="number" id="tds_sep" placeholder="Enter September TDS" min="0">
                    </div>
                </div>
            </div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="tds_oct">October</label>
                        <input type="number" id="tds_oct" placeholder="Enter October TDS" min="0">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="tds_nov">November</label>
                        <input type="number" id="tds_nov" placeholder="Enter November TDS" min="0">
                    </div>
                </div>
            </div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="tds_dec">December</label>
                        <input type="number" id="tds_dec" placeholder="Enter December TDS" min="0">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="tds_jan">January</label>
                        <input type="number" id="tds_jan" placeholder="Enter January TDS" min="0">
                    </div>
                </div>
            </div>
            <div class="flex-row">
                <div class="col">
                    <div class="form-group">
                        <label for="tds_feb">February</label>
                        <input type="number" id="tds_feb" placeholder="Enter February TDS" min="0">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="tds_mar">March</label>
                        <input type="number" id="tds_mar" placeholder="Enter March TDS" min="0">
                    </div>
                </div>
            </div>
        </div>

        <!-- Calculate Button -->
        <div class="text-center my-8">
            <button id="calculate-btn" class="button" onclick="calculateTDS()">Calculate TDS</button>
        </div>

        <!-- Results Section -->
        <div class="card" id="results-section" style="display: none;">
            <div class="card-header"><h3>TDS Calculation Results</h3></div>
            <h4 class="text-xl font-semibold mb-4 text-gray-700">Income Breakup</h4>
            <table class="result-table mb-6">
                <thead><tr><th>Particulars</th><th>Amount (₹)</th></tr></thead>
                <tbody>
                    <tr><td>Basic Salary</td><td id="basic_salary_result">0</td></tr>
                    <tr><td>HRA</td><td id="hra_result">0</td></tr>
                    <tr><td>Bonus/Incentive</td><td id="bonus_result">0</td></tr>
                    <tr><td>Special Allowance</td><td id="special_allowance_result">0</td></tr>
                    <tr><td>Other Allowance</td><td id="other_allowance_result">0</td></tr>
                    <tr><td><strong>Gross Salary</strong></td><td id="gross_salary" class="font-bold">0</td></tr>
                    <tr><td>HRA Exemption u/s 10(13A)</td><td id="hra_exemption_result">0</td></tr>
                    <tr><td>Exempt Allowance</td><td id="exempt_allowance_result">0</td></tr>
                    <tr><td>Professional Tax Paid</td><td id="professional_tax_result">0</td></tr>
                    <tr><td>Standard Deduction</td><td id="standard_deduction">0</td></tr>
                    <tr><td><strong>Total Exemptions & Deductions</strong></td><td id="total_exemptions" class="font-bold">0</td></tr>
                    <tr><td><strong>Net Salary Income</strong></td><td id="net_salary" class="font-bold">0</td></tr>
                    <tr><td>Loss from House Property (Interest)</td><td id="housing_loan_interest_result">0</td></tr>
                    <tr><td>Income from Other Sources</td><td id="other_income_result">0</td></tr>
                    <tr><td><strong>Gross Total Income</strong></td><td id="gross_total_income" class="font-bold">0</td></tr>
                </tbody>
            </table>
            <h4 class="text-xl font-semibold mb-4 text-gray-700">Deductions (Old Regime)</h4>
            <table class="result-table mb-6">
                <thead><tr><th>Particulars</th><th>Amount (₹)</th></tr></thead>
                <tbody>
                    <tr><td>Section 80C</td><td id="section_80c_result">0</td></tr>
                    <tr><td>Section 80CCC</td><td id="section_80ccc_result">0</td></tr>
                    <tr><td>Section 80CCD(1)</td><td id="section_80ccd1_result">0</td></tr>
                    <tr><td>Section 80CCD(1B)</td><td id="section_80ccd1b_result">0</td></tr>
                    <tr><td>Section 80CCD(2)</td><td id="section_80ccd2_result">0</td></tr>
                    <tr><td>Section 80D</td><td id="section_80d_result">0</td></tr>
                    <tr><td>Section 80E</td><td id="section_80e_result">0</td></tr>
                    <tr><td>Section 80G</td><td id="section_80g_result">0</td></tr>
                    <tr><td>Section 80TTA/80TTB</td><td id="section_80tta_result">0</td></tr>
                    <tr><td><strong>Total Deductions</strong></td><td id="total_deductions" class="font-bold">0</td></tr>
                </tbody>
            </table>
            <h4 class="text-xl font-semibold mb-4 text-gray-700">Tax Calculation</h4>
            <table class="result-table mb-6">
                <thead><tr><th>Particulars</th><th>Amount (₹)</th></tr></thead>
                <tbody>
                    <tr><td>Gross Total Income</td><td id="gross_income_tax">0</td></tr>
                    <tr><td>Total Deductions (Old Regime)</td><td id="total_deductions_tax">0</td></tr>
                    <tr><td><strong>Net Taxable Income</strong></td><td id="net_taxable_income" class="font-bold">0</td></tr>
                    <tr><td>Income Tax</td><td id="income_tax">0</td></tr>
                    <tr><td>Rebate u/s 87A</td><td id="rebate">0</td></tr>
                    <tr><td>Surcharge</td><td id="surcharge">0</td></tr>
                    <tr><td>Tax After Rebate & Surcharge</td><td id="tax_after_rebate">0</td></tr>
                    <tr><td>Health & Education Cess (4%)</td><td id="cess">0</td></tr>
                    <tr><td>Prior TDS Deducted</td><td id="prior_tds_result">0</td></tr>
                    <tr><td><strong>Remaining Annual Tax Liability</strong></td><td id="annual_tax_liability" class="font-bold">0</td></tr>
                </tbody>
            </table>
            <h4 class="text-xl font-semibold mb-4 text-gray-700">Monthly TDS Breakdown</h4>
            <div class="chart-container">
                <canvas id="tds-chart"></canvas>
            </div>
            <table class="result-table mb-6">
                <thead><tr><th>Month</th><th>TDS Deducted (₹)</th><th>TDS Liability (₹)</th></tr></thead>
                <tbody id="monthly_tds_table"></tbody>
            </table>
            <div class="summary-box">
                <h3>Average Monthly TDS (Remaining Months)</h3>
                <div class="amount" id="monthly_tds_amount">₹ 0</div>
            </div>
        </div>
    </div>

    <footer>
        <p>© 2025 TDS Calculator. All rights reserved.</p>
    </footer>



<script>
     //  if (window.location.href.toLowerCase().includes("https://sumitgarg100000.github.io")) {
      // Get the heading element
      //       var heading = document.querySelector("h2");
      // Check if the heading text content is equal to "abc"
      //if(heading.textContent.trim() === "(Disclaimer- This Calculator is made after incorporating all the relevant provisions of income tax act applicable for FY 2024-25(AY 2025-26). If any query, Contact - Sumit Garg, Ph. No. - 9716804520, Email - SumitGarg100000@Gmail.com)")
      // {

      // import json coding suru
      // Data ko localStorage mein save karna
function saveToLocalStorage() {
  const inputs = document.querySelectorAll('input, select');
  const data = {};

  inputs.forEach(input => {
    data[input.id] = input.value;
  });
  
  localStorage.setItem('taxCalculatorData', JSON.stringify(data));

  // Event listeners for real-time updates
  inputs.forEach(input => {
    input.addEventListener('input', function() {
      data[input.id] = input.value;
      localStorage.setItem('taxCalculatorData', JSON.stringify(data));
    });

    input.addEventListener('change', function() {
      data[input.id] = input.value;
      localStorage.setItem('taxCalculatorData', JSON.stringify(data));
    });
  });
}

// LocalStorage se data load karna aur inputs mein set karna
function loadFromLocalStorage() {
  const savedData = localStorage.getItem('taxCalculatorData');
  if (savedData) {
    const data = JSON.parse(savedData);
    const inputs = document.querySelectorAll('input, select');
    inputs.forEach(input => {
      if (data[input.id]) {
        input.value = data[input.id];
      }
    });
  }
}

// Page refresh ya close hone se pehle data save karna
window.addEventListener('beforeunload', function() {
  const inputs = document.querySelectorAll('input, select');
  const data = {};
  inputs.forEach(input => {
    data[input.id] = input.value;
  });
  localStorage.setItem('taxCalculatorData', JSON.stringify(data));
});

// Page load hone pe saved data ko load karna
document.addEventListener('DOMContentLoaded', function() {
  loadFromLocalStorage(); // Pehle saved data load karo
  saveToLocalStorage();   // Phir event listeners set karo
});

      


// import json coding end
      document.addEventListener("DOMContentLoaded", function() {
   
        // calculate all income function run
   function CalculateAllIncome() {
       
    // Income from Salary   
    let oldbasicsalary = Math.max(0, Number(document.getElementById('basicsalary').value));
    let oldhra = Math.max(0, Number(document.getElementById('hra').value));
    let oldbonus = Math.max(0, Number(document.getElementById('bonus').value));
    let oldspecialallowance = Math.max(0, Number(document.getElementById('specialallowance').value));
    let oldotherallowance = Math.max(0, Number(document.getElementById('otherallowance').value));

    let oldgrosssalary = oldbasicsalary + oldhra + oldbonus + oldspecialallowance + oldotherallowance;

    let oldexemptionsec13a = Math.min(Math.max(0, Number(document.getElementById('exemptionsec13a').value)), oldgrosssalary);
    let oldotherexemption = Math.min(Math.max(0, Number(document.getElementById('otherexemption').value)), oldgrosssalary - oldexemptionsec13a);
    let oldprofessionaltax = Math.min(Math.max(0, Number(document.getElementById('professionaltax').value)), oldgrosssalary - oldexemptionsec13a - oldotherexemption);
    let oldstandarddeduction = Math.min((oldgrosssalary - (oldexemptionsec13a + oldotherexemption + oldprofessionaltax)), 50000);

    let oldnetsalary = oldgrosssalary - (oldexemptionsec13a + oldotherexemption + oldprofessionaltax + oldstandarddeduction);

    let newbasicsalary = Math.max(0, Number(document.getElementById('basicsalary').value));
    let newhra = Math.max(0, Number(document.getElementById('hra').value));
    let newbonus = Math.max(0, Number(document.getElementById('bonus').value));
    let newspecialallowance = Math.max(0, Number(document.getElementById('specialallowance').value));
    let newotherallowance = Math.max(0, Number(document.getElementById('otherallowance').value));

    let newgrosssalary = newbasicsalary + newhra + newbonus + newspecialallowance + newotherallowance;

    let newexemptionsec13a = 0;
    let newotherexemption = 0;
    let newprofessionaltax = 0;
    let newstandarddeduction = Math.min((newgrosssalary - (newexemptionsec13a + newotherexemption + newprofessionaltax)), 75000);

    let newnetsalary = newgrosssalary - (newexemptionsec13a + newotherexemption + newprofessionaltax + newstandarddeduction);

    
    // Income from House Property
    
    let oldinterestletout = Math.min(Math.max(0, Number(document.getElementById('interestletout').value)),oldnav*0.7+200000);
    let oldinterestselfoccupied = Math.min(Math.max(0, Number(document.getElementById('interestselfoccupied').value)),200000);
    
    
    
    let newinterestletout = Math.min(Math.max(0, Number(document.getElementById('interestletout').value)),newnav*0.7);
    let newinterestselfoccupied = 0;
    let newnetincomehp = Math.max((newnav - newstandarddeductionhp) - newinterestletout - newinterestselfoccupied,0);
    
    
    //Interest on Self-Occupied - Allowed upto 2Lakh in Old Scheme but not Allowed in New Scheme
    //Interest on LetOut    - No Limit in Old & New Scheme from NAV Income
    //Loss on Interest on LetOut    - Interhead Setoff Allowed in Old Scheme upto 2Lakh from other head of Income but not allowed in new scheme
    //Old net income logic - Can be Nagative only upto 200000 for interhead setoff from the Interest on Self-Occupied & Letout both
    //Net net income logic - Can not be Nagative Beacuse no interhead setoff allowed. So, Min Value will be Zero
    
    
    
    
    //Income from Other Sources
    // Retrieve values from input fields
    let oldotherincome = Math.max(0, Number(document.getElementById('otherincome').value));
    let newotherincome = Math.max(0, Number(document.getElementById('otherincome').value));
    
    let oldnetothersources = oldotherincome;
    
    let newnetothersources = newotherincome;
    

    
    

    
     // Calculate Gross Total Income
    
    

    let oldgrosstotalincome = Math.max(oldnetsalary + oldnetincomehp + oldnetothersources,0);
    let newgrosstotalincome = Math.max(newnetsalary + newnetincomehp + newnetothersources,0);

    //Deductions


// Get user input for deductions
   // Retrieve values from the input fields and ensure each deduction does not exceed a certain value
let olddeduction80c = Math.min(150000, Number(document.getElementById('deduction80c').value));
let olddeduction80ccc = Math.min(150000, Number(document.getElementById('deduction80ccc').value)); // Adjust 'maximumValue' accordingly
let olddeduction80ccd1 = Math.min(150000, Number(document.getElementById('deduction80ccd1').value)); // Adjust 'maximumValue' accordingly
let oldrestrictdeduction = Math.min(150000, olddeduction80c + olddeduction80ccc + olddeduction80ccd1);
let olddeduction80ccd1b = Math.min(50000, Number(document.getElementById('deduction80ccd1b').value)); // Adjust 'maximumValue' accordingly
let olddeduction80ccd2 = Math.max(Number(document.getElementById('deduction80ccd2').value),0); 
let olddeduction80d = Math.min(100000, Number(document.getElementById('deduction80d').value)); // Adjust 'maximumValue' accordingly
let olddeduction80g = Math.max(Number(document.getElementById('deduction80g').value),0); 
let olddeduction80e = Math.max(Number(document.getElementById('deduction80e').value),0); // Adjust 'maximumValue' accordingly
let olddeduction80ee = Math.max(Number(document.getElementById('deduction80ee').value),0); // Adjust 'maximumValue' accordingly
let olddeduction80tta = Math.min(10000, Number(document.getElementById('deduction80tta').value)); // Adjust 'maximumValue' according
let oldanyotherdeduction = Math.max(Number(document.getElementById('anyotherdeduction').value),0); // Adjust 'maximumValue' accordingly

let oldtotaldeduction = oldrestrictdeduction + olddeduction80ccd1b + olddeduction80ccd2 + olddeduction80d + olddeduction80g + olddeduction80e + olddeduction80ee + olddeduction80tta + oldanyotherdeduction;


let oldeligiblededuction=Math.min(Math.max(oldgrosstotalincome,0),oldtotaldeduction);

let oldnetincome = Math.max(oldgrosstotalincome - oldeligiblededuction,0);


    
// Retrieve values from the input fields and ensure each deduction does not exceed a certain valuelet newdeduction80c = Math.min(150000, Number(document.getElementById('deduction80c').value));

let newdeduction80c = 0;
let newdeduction80cCC = 0;
let newdeduction80ccd1 = 0;
let newrestrictdeduction = Math.min(0,150000, newdeduction80c + newdeduction80cCC + newdeduction80ccd1);
let newdeduction80ccd1b = 0;
let newdeduction80ccd2 = Math.max(Number(document.getElementById('deduction80ccd2').value), 0); 
let newdeduction80d = 0;
let newdeduction80g = 0;
let newdeduction80e = 0;
let newdeduction80ee = 0;
let newdeduction80tta = 0;
let newdeduction80ttb = 0;
let newanyotherdeduction = 0;


let newtotaldeduction = newrestrictdeduction + newdeduction80ccd1b + newdeduction80ccd2 + newdeduction80d + newdeduction80g + newdeduction80e + newdeduction80ee + newdeduction80tta + newanyotherdeduction;
let neweligiblededuction=Math.min(Math.max(newgrosstotalincome,0),newtotaldeduction);
let newnetincome = Math.max(newgrosstotalincome - neweligiblededuction, 0);




   let oldroundoff = Math.round(oldnetincome/10)*10;
   let newroundoff = Math.round(newnetincome/10)*10;
   
    
    //Setoff & Carry Forward for old
    
    let oldstcgsec111income =0;
    let oldstcgsec111aincome =0;
    let oldstcgsec111aincome_jul =0;
    let oldstcglossforltcg =0;
    
    let oldltcgsec112income =0;
    let oldltcgsec112income_jul =0;
    let oldltcgsec112aincome =0;
    let oldltcgsec112aincome_jul =0;
    
    
    
    //oldltcgsec111income after setoff for clculation
    if((oldstcgsec111 + oldstcgsec111_jul + oldstcgsec111a_minus + oldstcgsec111a_minus_jul)>0)
    {
        oldstcgsec111income = oldstcgsec111 + oldstcgsec111_jul + oldstcgsec111a_minus + oldstcgsec111a_minus_jul;
    } else {
        oldstcgsec111income = 0;
    }
    
     
    
    if((oldstcgsec111a_jul + oldstcgsec111_minus + oldstcgsec111_minus_jul + oldstcgsec111a_minus)>0)
    {
        oldstcgsec111aincome_jul = oldstcgsec111a_jul + oldstcgsec111_minus + oldstcgsec111_minus_jul + oldstcgsec111a_minus;
    } else {
        oldstcgsec111aincome_jul = 0;
    }
    
    
    
    
    if((oldstcgsec111a + oldstcgsec111_minus + oldstcgsec111_minus_jul + oldstcgsec111a_minus_jul)>0)
    {
        oldstcgsec111aincome = oldstcgsec111a + oldstcgsec111_minus + oldstcgsec111_minus_jul + oldstcgsec111a_minus_jul;
    } else {
        oldstcgsec111aincome = 0;
    }
    
    
    
    oldstcglossforltcg = Math.min(oldstcgsec111 + oldstcgsec111a + oldstcgsec111_jul + oldstcgsec111a_jul,0);
   
    
    
    //oldltcgsec112income after setoff for clculation
    if((oldltcgsec112 + oldltcgsec112a_minus + oldltcgsec112_minus_jul + oldltcgsec112a_minus_jul + oldstcglossforltcg)>0)
    {
        oldltcgsec112income = oldltcgsec112 + oldltcgsec112a_minus + oldltcgsec112_minus_jul + oldltcgsec112a_minus_jul + oldstcglossforltcg;
    } else {
        oldltcgsec112income = 0;
    }
    
    //oldltcgsec112income_jul after setoff for clculation
    if((oldltcgsec112_jul + oldltcgsec112_minus + oldltcgsec112a_minus  + oldltcgsec112a_minus_jul + oldstcglossforltcg)>0)
    {
        oldltcgsec112income_jul = oldltcgsec112_jul + oldltcgsec112_minus + oldltcgsec112a_minus  + oldltcgsec112a_minus_jul + oldstcglossforltcg;
    } else {
        oldltcgsec112income_jul = 0;
    }
    
    //oldltcgsec112aincome_jul after setoff for clculation
    if((oldltcgsec112a_jul + oldltcgsec112_minus + oldltcgsec112a_minus  + oldltcgsec112_minus_jul + oldstcglossforltcg)>0)
    {
        oldltcgsec112aincome_jul = oldltcgsec112a_jul + oldltcgsec112_minus + oldltcgsec112a_minus  + oldltcgsec112_minus_jul + oldstcglossforltcg;
    } else {
        oldltcgsec112aincome_jul = 0;
    }
    
    //oldltcgsec112income after setoff for clculation
    if((oldltcgsec112a + oldltcgsec112_minus + oldltcgsec112a_minus_jul  + oldltcgsec112_minus_jul + oldstcglossforltcg)>0)
    {
        oldltcgsec112aincome = oldltcgsec112a + oldltcgsec112_minus + oldltcgsec112a_minus_jul  + oldltcgsec112_minus_jul + oldstcglossforltcg;
    } else {
        oldltcgsec112aincome = 0;
    }
 


    //Setoff & Carry Forward for new
    
    let newstcgsec111income =0;
    let newstcgsec111aincome =0;
    let newstcgsec111aincome_jul =0;
    let newstcglossforltcg =0;
    
    let newltcgsec112income =0;
    let newltcgsec112income_jul =0;
    let newltcgsec112aincome =0;
    let newltcgsec112aincome_jul =0;
    
    //newltcgsec111income after setoff for clculation
    if((newstcgsec111 + newstcgsec111_jul + newstcgsec111a_minus + newstcgsec111a_minus_jul)>0)
    {
        newstcgsec111income = newstcgsec111 + newstcgsec111_jul + newstcgsec111a_minus + newstcgsec111a_minus_jul;
    } else {
        newstcgsec111income = 0;
    }
    
    
    if((newstcgsec111a_jul + newstcgsec111_minus + newstcgsec111_minus_jul + newstcgsec111a_minus)>0)
    {
        newstcgsec111aincome_jul = newstcgsec111a_jul + newstcgsec111_minus + newstcgsec111_minus_jul + newstcgsec111a_minus;
    } else {
        newstcgsec111aincome_jul = 0;
    }
    
    
    
    if((newstcgsec111a + newstcgsec111_minus + newstcgsec111_minus_jul + newstcgsec111a_minus_jul)>0)
    {
        newstcgsec111aincome = newstcgsec111a + newstcgsec111_minus + newstcgsec111_minus_jul + newstcgsec111a_minus_jul;
    } else {

 

    //Old Normal Income & Special Income
   let oldnormalincome = oldroundoff;
   let oldtotalincome = oldnormalincome;
   let oldtaxonnormalincome = 0;
   let oldrebate = 0;
   let oldsurcharge = 0;
   let oldmarginalrelief = 0;
   let age = Number(document.getElementById('age').value);
   
   
   //Old Slab Rate benefit given to LTCG & STCG Special rates income not lottery
    
    if(oldnormalincome<250000 && age<60)
    
{       if(Math.max(oldltcgsec112,0)>250000){
        oldtaxonspecialincome = Math.max(Math.max(oldltcgsec112,0)-Math.max(250000-oldnormalincome,0),0)*0.2 +  Math.max(oldstcgsec111aincome,0)*0.15 + Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1 + Math.max(oldstcgsec111aincome_jul,0)*0.2 + Math.max(oldltcgsec112income_jul,0)*0.125 + Math.max(oldltcgsec112aincome_jul-125000,0)*0.125 + Math.max(oldwinninglottery+oldvda,0)*0.3;
    } else if(Math.max(oldltcgsec112,0)+Math.max(oldstcgsec111aincome_jul,0)>250000){
       oldtaxonspecialincome = Math.max(Math.max(oldstcgsec111aincome_jul,0)-Math.max(oldltcgsec112,0)-Math.max(250000-oldnormalincome,0),0)*0.2 +  Math.max(oldstcgsec111aincome,0)*0.15 + Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1  + Math.max(oldltcgsec112income_jul,0)*0.125 + Math.max(oldltcgsec112aincome_jul-125000,0)*0.125 + Math.max(oldwinninglottery+oldvda,0)*0.3;
    } else if(Math.max(oldltcgsec112,0)+Math.max(oldstcgsec111aincome_jul,0)+Math.max(oldstcgsec111aincome,0)>250000){
       oldtaxonspecialincome = Math.max(Math.max(oldstcgsec111aincome,0)-Math.max(oldstcgsec111aincome_jul,0)-Math.max(oldltcgsec112,0)-Math.max(250000-oldnormalincome,0),0)*0.15 +  Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1  + Math.max(oldltcgsec112income_jul,0)*0.125 + Math.max(oldltcgsec112aincome_jul-125000,0)*0.125 + Math.max(oldwinninglottery+oldvda,0)*0.3;
    }  else if(Math.max(oldltcgsec112income_jul,0)+Math.max(oldltcgsec112,0)+Math.max(oldstcgsec111aincome_jul,0)+Math.max(oldstcgsec111aincome,0)>250000){
       oldtaxonspecialincome = Math.max(Math.max(oldltcgsec112income_jul,0)-Math.max(oldstcgsec111aincome,0)-Math.max(oldstcgsec111aincome_jul,0)-Math.max(oldltcgsec112,0)-Math.max(250000-oldnormalincome,0),0)*0.125 +  Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1  +  Math.max(oldltcgsec112aincome_jul-125000,0)*0.125 + Math.max(oldwinninglottery+oldvda,0)*0.3;
    }  else if(Math.max(oldltcgsec112aincome_jul-125000,0)+Math.max(oldltcgsec112income_jul,0)+Math.max(oldltcgsec112,0)+Math.max(oldstcgsec111aincome_jul,0)+Math.max(oldstcgsec111aincome,0)>250000){
       oldtaxonspecialincome = Math.max(Math.max(oldltcgsec112aincome_jul-125000,0)-Math.max(oldltcgsec112income_jul,0)-Math.max(oldstcgsec111aincome,0)-Math.max(oldstcgsec111aincome_jul,0)-Math.max(oldltcgsec112,0)-Math.max(250000-oldnormalincome,0),0)*0.125 +  Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1  +  Math.max(oldwinninglottery+oldvda,0)*0.3;
    }  else {
       oldtaxonspecialincome = Math.max(Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)-Math.max(oldltcgsec112aincome_jul-125000,0)-Math.max(oldltcgsec112income_jul,0)-Math.max(oldstcgsec111aincome,0)-Math.max(oldstcgsec111aincome_jul,0)-Math.max(oldltcgsec112,0)-Math.max(250000-oldnormalincome,0),0)*0.1 +    Math.max(oldwinninglottery+oldvda,0)*0.3;
    } 
    
} else  if(oldnormalincome<300000 && age<80)
    
{       if(Math.max(oldltcgsec112,0)>300000){
        oldtaxonspecialincome = Math.max(Math.max(oldltcgsec112,0)-Math.max(300000-oldnormalincome,0),0)*0.2 +  Math.max(oldstcgsec111aincome,0)*0.15 + Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1 + Math.max(oldstcgsec111aincome_jul,0)*0.2 + Math.max(oldltcgsec112income_jul,0)*0.125 + Math.max(oldltcgsec112aincome_jul-125000,0)*0.125 + Math.max(oldwinninglottery+oldvda,0)*0.3;
    } else if(Math.max(oldltcgsec112,0)+Math.max(oldstcgsec111aincome_jul,0)>300000){
       oldtaxonspecialincome = Math.max(Math.max(oldstcgsec111aincome_jul,0)-Math.max(oldltcgsec112,0)-Math.max(300000-oldnormalincome,0),0)*0.2 +  Math.max(oldstcgsec111aincome,0)*0.15 + Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1  + Math.max(oldltcgsec112income_jul,0)*0.125 + Math.max(oldltcgsec112aincome_jul-125000,0)*0.125 + Math.max(oldwinninglottery+oldvda,0)*0.3;
    } else if(Math.max(oldltcgsec112,0)+Math.max(oldstcgsec111aincome_jul,0)+Math.max(oldstcgsec111aincome,0)>300000){
       oldtaxonspecialincome = Math.max(Math.max(oldstcgsec111aincome,0)-Math.max(oldstcgsec111aincome_jul,0)-Math.max(oldltcgsec112,0)-Math.max(300000-oldnormalincome,0),0)*0.15 +  Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1  + Math.max(oldltcgsec112income_jul,0)*0.125 + Math.max(oldltcgsec112aincome_jul-125000,0)*0.125 + Math.max(oldwinninglottery+oldvda,0)*0.3;
    }  else if(Math.max(oldltcgsec112income_jul,0)+Math.max(oldltcgsec112,0)+Math.max(oldstcgsec111aincome_jul,0)+Math.max(oldstcgsec111aincome,0)>300000){
       oldtaxonspecialincome = Math.max(Math.max(oldltcgsec112income_jul,0)-Math.max(oldstcgsec111aincome,0)-Math.max(oldstcgsec111aincome_jul,0)-Math.max(oldltcgsec112,0)-Math.max(300000-oldnormalincome,0),0)*0.125 +  Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1  +  Math.max(oldltcgsec112aincome_jul-125000,0)*0.125 + Math.max(oldwinninglottery+oldvda,0)*0.3;
    }  else if(Math.max(oldltcgsec112aincome_jul-125000,0)+Math.max(oldltcgsec112income_jul,0)+Math.max(oldltcgsec112,0)+Math.max(oldstcgsec111aincome_jul,0)+Math.max(oldstcgsec111aincome,0)>300000){
       oldtaxonspecialincome = Math.max(Math.max(oldltcgsec112aincome_jul-125000,0)-Math.max(oldltcgsec112income_jul,0)-Math.max(oldstcgsec111aincome,0)-Math.max(oldstcgsec111aincome_jul,0)-Math.max(oldltcgsec112,0)-Math.max(300000-oldnormalincome,0),0)*0.125 +  Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1  +  Math.max(oldwinninglottery+oldvda,0)*0.3;
    }  else {
       oldtaxonspecialincome = Math.max(Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)-Math.max(oldltcgsec112aincome_jul-125000,0)-Math.max(oldltcgsec112income_jul,0)-Math.max(oldstcgsec111aincome,0)-Math.max(oldstcgsec111aincome_jul,0)-Math.max(oldltcgsec112,0)-Math.max(300000-oldnormalincome,0),0)*0.1 +    Math.max(oldwinninglottery+oldvda,0)*0.3;
    } 
    
}

else    if(oldnormalincome<500000 && age>80)
    
{       if(Math.max(oldltcgsec112,0)>500000){
        oldtaxonspecialincome = Math.max(Math.max(oldltcgsec112,0)-Math.max(500000-oldnormalincome,0),0)*0.2 +  Math.max(oldstcgsec111aincome,0)*0.15 + Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1 + Math.max(oldstcgsec111aincome_jul,0)*0.2 + Math.max(oldltcgsec112income_jul,0)*0.125 + Math.max(oldltcgsec112aincome_jul-125000,0)*0.125 + Math.max(oldwinninglottery+oldvda,0)*0.3;
    } else if(Math.max(oldltcgsec112,0)+Math.max(oldstcgsec111aincome_jul,0)>500000){
       oldtaxonspecialincome = Math.max(Math.max(oldstcgsec111aincome_jul,0)-Math.max(oldltcgsec112,0)-Math.max(500000-oldnormalincome,0),0)*0.2 +  Math.max(oldstcgsec111aincome,0)*0.15 + Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1  + Math.max(oldltcgsec112income_jul,0)*0.125 + Math.max(oldltcgsec112aincome_jul-125000,0)*0.125 + Math.max(oldwinninglottery+oldvda,0)*0.3;
    } else if(Math.max(oldltcgsec112,0)+Math.max(oldstcgsec111aincome_jul,0)+Math.max(oldstcgsec111aincome,0)>500000){
       oldtaxonspecialincome = Math.max(Math.max(oldstcgsec111aincome,0)-Math.max(oldstcgsec111aincome_jul,0)-Math.max(oldltcgsec112,0)-Math.max(500000-oldnormalincome,0),0)*0.15 +  Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1  + Math.max(oldltcgsec112income_jul,0)*0.125 + Math.max(oldltcgsec112aincome_jul-125000,0)*0.125 + Math.max(oldwinninglottery+oldvda,0)*0.3;
    }  else if(Math.max(oldltcgsec112income_jul,0)+Math.max(oldltcgsec112,0)+Math.max(oldstcgsec111aincome_jul,0)+Math.max(oldstcgsec111aincome,0)>500000){
       oldtaxonspecialincome = Math.max(Math.max(oldltcgsec112income_jul,0)-Math.max(oldstcgsec111aincome,0)-Math.max(oldstcgsec111aincome_jul,0)-Math.max(oldltcgsec112,0)-Math.max(500000-oldnormalincome,0),0)*0.125 +  Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1  +  Math.max(oldltcgsec112aincome_jul-125000,0)*0.125 + Math.max(oldwinninglottery+oldvda,0)*0.3;
    }  else if(Math.max(oldltcgsec112aincome_jul-125000,0)+Math.max(oldltcgsec112income_jul,0)+Math.max(oldltcgsec112,0)+Math.max(oldstcgsec111aincome_jul,0)+Math.max(oldstcgsec111aincome,0)>500000){
       oldtaxonspecialincome = Math.max(Math.max(oldltcgsec112aincome_jul-125000,0)-Math.max(oldltcgsec112income_jul,0)-Math.max(oldstcgsec111aincome,0)-Math.max(oldstcgsec111aincome_jul,0)-Math.max(oldltcgsec112,0)-Math.max(500000-oldnormalincome,0),0)*0.125 +  Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1  +  Math.max(oldwinninglottery+oldvda,0)*0.3;
    }  else {
       oldtaxonspecialincome = Math.max(Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)-Math.max(oldltcgsec112aincome_jul-125000,0)-Math.max(oldltcgsec112income_jul,0)-Math.max(oldstcgsec111aincome,0)-Math.max(oldstcgsec111aincome_jul,0)-Math.max(oldltcgsec112,0)-Math.max(500000-oldnormalincome,0),0)*0.1 +    Math.max(oldwinninglottery+oldvda,0)*0.3;
    } 
    
} else {
   oldtaxonspecialincome  = Math.max(oldstcgsec111aincome,0)*0.15 + Math.max(oldltcgsec112income,0)*0.2 + Math.max(oldltcgsec112aincome-(125000-Math.min(oldltcgsec112aincome_jul,125000)),0)*0.1 + Math.max(oldstcgsec111aincome_jul,0)*0.2 + Math.max(oldltcgsec112income_jul,0)*0.125 + Math.max(oldltcgsec112aincome_jul-125000,0)*0.125 + Math.max(oldwinninglottery+oldvda,0)*0.3;
 
}
   
   
   
   
   
    //Old Slab Rates
    
  if (age<60 || age ==="") {
    
    if (oldnormalincome <= 250000) {
      oldtaxonnormalincome = 0;
    } else if (oldnormalincome <= 500000) {
      oldtaxonnormalincome = 0.05 * (oldnormalincome - 250000);
    } else if (oldnormalincome <= 1000000) {
      oldtaxonnormalincome = 12500 + 0.2 * (oldnormalincome - 500000);
    } else {
      oldtaxonnormalincome = 112500 + 0.3 * (oldnormalincome - 1000000);
    }
  } else if (age>=60 && age<80) {
    if (oldnormalincome <= 300000) {
      oldtaxonnormalincome = 0;
    } else if (oldnormalincome <= 500000) {
      oldtaxonnormalincome = 0.05 * (oldnormalincome - 300000);
    } else if (oldnormalincome <= 1000000) {
      oldtaxonnormalincome = 10000 + 0.2 * (oldnormalincome - 500000);
    } else {
      oldtaxonnormalincome = 110000 + 0.3 * (oldnormalincome - 1000000);
    }
  } else { // age 80 and above
    if (oldnormalincome <= 500000) {
      oldtaxonnormalincome = 0;
    } else if (oldnormalincome <= 1000000) {
      oldtaxonnormalincome = 0.2 * (oldnormalincome - 500000);
    } else {
      oldtaxonnormalincome = 100000 + 0.3 * (oldnormalincome - 1000000);
    }
  }
  
    let oldtaxbeforerebate = oldtaxonnormalincome + oldtaxonspecialincome;
 

    //only LTCG112A benefit not given from rebate in old scheme but in new scheme no special income tax allowed
    
    if (oldtotalincome<= 500000) {
        oldrebate = Math.max(Math.min(oldtaxbeforerebate,12500,oldtaxbeforerebate-Math.max(oldltcgsec112aincome-Math.min(125000,Math.max(oldltcgsec112aincome_jul,0)))*0.1 - Math.max(oldltcgsec112aincome_jul-125000,0)*0.125),0);
     } else {
        oldrebate = 0;
     }
    
    

     
     let oldtaxbeforesurcharge=oldtaxbeforerebate-oldrebate;
    
     
     let olddividend= Number(document.getElementById('oldregimedividendincome').textContent);
     let olddividendtax =(olddividend*oldtaxonnormalincome)/oldnormalincome;
     
    
    //Old Surcharge
    
     if ((oldnormalincome+oldwinninglottery-olddividendincome) > 50000000) {
        // 37% surcharge for income exceeding Rs. 5 crore
        oldsurcharge = (oldtaxonnormalincome+oldwinninglottery*0.3-olddividendtax) * 0.37+(oldtaxonspecialincome+olddividendtax-oldwinninglottery*0.3)*0.15;
     }else   if ((oldnormalincome+oldwinninglottery-olddividendincome) > 20000000) {
        // 25% surcharge for income exceeding Rs. 2 crore
        oldsurcharge = (oldtaxonnormalincome+oldwinninglottery*0.3-olddividendtax) * 0.25+(oldtaxonspecialincome+olddividendtax-oldwinninglottery*0.3)*0.15;
    } else if ((oldtotalincome) > 10000000) {
        // 15% surcharge for income exceeding Rs. 1 crore
        oldsurcharge = oldtaxbeforesurcharge * 0.15;
    } else if ((oldtotalincome) > 5000000) {
        // 10% surcharge for income exceeding Rs. 50 lakh
        oldsurcharge = oldtaxbeforesurcharge * 0.10;
    } else {
        // No surcharge
        oldsurcharge = 0;
    }
    
    //Old Marginal Relief
    
    if (age<60 || age ==="") {
    
    if (oldtotalincome > 50000000) {
    oldmarginalrelief = Math.max((oldtaxbeforesurcharge + oldsurcharge - 18515625) - (oldtotalincome - 50000000), 0);
    } else if (oldtotalincome > 20000000) {
    oldmarginalrelief = Math.max((oldtaxbeforesurcharge + oldsurcharge - 6684375) - (oldtotalincome - 20000000), 0);
    } else if (oldtotalincome > 10000000) {
    oldmarginalrelief = Math.max((oldtaxbeforesurcharge + oldsurcharge - 3093750) - (oldtotalincome - 10000000), 0);
    } else if (oldtotalincome > 5000000) {
    oldmarginalrelief = Math.max((oldtaxbeforesurcharge + oldsurcharge - 1312500) - (oldtotalincome - 5000000), 0);
    } else {
    oldmarginalrelief = 0;
    }
    
    } else if(age>=60 && age<80){
        if (oldtotalincome > 50000000) {
    oldmarginalrelief = Math.max((oldtaxbeforesurcharge + oldsurcharge - 18512500) - (oldtotalincome - 50000000), 0);
    } else if (oldtotalincome > 20000000) {
    oldmarginalrelief = Math.max((oldtaxbeforesurcharge + oldsurcharge - 6681500) - (oldtotalincome - 20000000), 0);
    } else if (oldtotalincome > 10000000) {
    oldmarginalrelief = Math.max((oldtaxbeforesurcharge + oldsurcharge - 3091000) - (oldtotalincome - 10000000), 0);
    } else if (oldtotalincome > 5000000) {
    oldmarginalrelief = Math.max((oldtaxbeforesurcharge + oldsurcharge - 1310000) - (oldtotalincome - 5000000), 0);
    } else {
    oldmarginalrelief = 0;
    }
    } else{
        if (oldtotalincome > 50000000) {
    oldmarginalrelief = Math.max((oldtaxbeforesurcharge + oldsurcharge - 18500000) - (oldtotalincome - 50000000), 0);
    } else if (oldtotalincome > 20000000) {
    oldmarginalrelief = Math.max((oldtaxbeforesurcharge + oldsurcharge - 6670000) - (oldtotalincome - 20000000), 0);
    } else if (oldtotalincome > 10000000) {
    oldmarginalrelief = Math.max((oldtaxbeforesurcharge + oldsurcharge - 3080000) - (oldtotalincome - 10000000), 0);
    } else if (oldtotalincome > 5000000) {
    oldmarginalrelief = Math.max((oldtaxbeforesurcharge + oldsurcharge - 1300000) - (oldtotalincome - 5000000), 0);
    } else {
    oldmarginalrelief = 0;
    }  
    }
    

    let oldtaxbeforecess = oldtaxbeforesurcharge + oldsurcharge - oldmarginalrelief;
    let oldcess = Math.max(0, oldtaxbeforecess * 0.04);
    let oldgrosstaxpayable = Math.max(oldtaxbeforecess + oldcess, 0);

    document.getElementById('oldregimenormalincometax').textContent = oldtaxonnormalincome.toFixed(2);
    document.getElementById('oldregimespecialincometax').textContent = oldtaxonspecialincome.toFixed(2);
    document.getElementById('oldregimetaxbeforerebate').textContent = oldtaxbeforerebate.toFixed(2);
    document.getElementById('oldregimerebate87a').textContent = oldrebate.toFixed(2);
    document.getElementById('oldregimetaxbeforesurcharge').textContent = oldtaxbeforesurcharge.toFixed(2);
    document.getElementById('oldregimesurcharge').textContent = oldsurcharge.toFixed(2);
    document.getElementById('oldregimemarginalrelief').textContent = oldmarginalrelief.toFixed(2);
    document.getElementById('oldregimetaxbeforecess').textContent = oldtaxbeforecess.toFixed(2);
    document.getElementById('oldregimecess').textContent = oldcess.toFixed(2);
    document.getElementById('oldregimegrosstaxpayable').textContent = oldgrosstaxpayable.toFixed(2);
    
    
    
    
    //new Normal Income & Special Income
   let newspecialincome = newstcgsec111aincome + newltcgsec112income + newltcgsec112aincome + newstcgsec111aincome_jul + newltcgsec112income_jul + newltcgsec112aincome_jul + newwinninglottery+newvda;
   let newnormalincome = newroundoff - newspecialincome;
   let newtotalincome = newnormalincome + newspecialincome;
   
   let newtaxonspecialincome = 0;//Math.max(newstcgsec111aincome,0)*0.15 + Math.max(newltcgsec112income,0)*0.2 + Math.max(newltcgsec112aincome-(125000-Math.min(newltcgsec112aincome_jul,125000)),0)*0.1 + Math.max(newstcgsec111aincome_jul,0)*0.2 + Math.max(newltcgsec112income_jul,0)*0.125 + Math.max(newltcgsec112aincome_jul-125000,0)*0.125 + Math.max(newwinninglottery,0)*0.3;
   let newtaxonnormalincome = 0;
   let newrebate = 0;
   let newsurcharge = 0;
   let newmarginalrelief = 0;
   
    //Slab Rates
    
    if (newnormalincome <= 400000) {
        newtaxonnormalincome = 0;
    } else if (newnormalincome <= 800000) {
        newtaxonnormalincome = 0.05 * (newnormalincome - 400000);   //20000
    } else if (newnormalincome <= 1200000) {
        newtaxonnormalincome = 20000 + 0.1 * (newnormalincome - 800000);
    } else if (newnormalincome <= 1600000) {
        newtaxonnormalincome = 60000+0.15 * (newnormalincome - 1200000);
    } else if (newnormalincome <= 2000000) {
        newtaxonnormalincome = 120000 + 0.2 * (newnormalincome - 1600000);
    } else if (newnormalincome <= 2400000) {
        newtaxonnormalincome = 200000 + 0.25 * (newnormalincome - 2000000);
    }else {
	newtaxonnormalincome = 300000 + 0.3 * (newnormalincome - 2400000);
    }
    
    
   // LTCG & STCG benefit from exemption limit will be given not lottery in new regime
   
  if(newnormalincome<400000)
  
  {
  
  
      if(Math.max(newltcgsec112,0)>400000){
        newtaxonspecialincome = Math.max(Math.max(newltcgsec112,0)-Math.max(400000-newnormalincome,0),0)*0.2 +  Math.max(newstcgsec111aincome,0)*0.15 + Math.max(newltcgsec112aincome-(125000-Math.min(newltcgsec112aincome_jul,125000)),0)*0.1 + Math.max(newstcgsec111aincome_jul,0)*0.2 + Math.max(newltcgsec112income_jul,0)*0.125 + Math.max(newltcgsec112aincome_jul-125000,0)*0.125 + Math.max(newwinninglottery+newvda,0)*0.3;
    } else if(Math.max(newltcgsec112,0)+Math.max(newstcgsec111aincome_jul,0)>400000){
       newtaxonspecialincome = Math.max(Math.max(newstcgsec111aincome_jul,0)-Math.max(newltcgsec112,0)-Math.max(400000-newnormalincome,0),0)*0.2 +  Math.max(newstcgsec111aincome,0)*0.15 + Math.max(newltcgsec112aincome-(125000-Math.min(newltcgsec112aincome_jul,125000)),0)*0.1  + Math.max(newltcgsec112income_jul,0)*0.125 + Math.max(newltcgsec112aincome_jul-125000,0)*0.125 + Math.max(newwinninglottery+newvda,0)*0.3;
    } else if(Math.max(newltcgsec112,0)+Math.max(newstcgsec111aincome_jul,0)+Math.max(newstcgsec111aincome,0)>400000){
       newtaxonspecialincome = Math.max(Math.max(newstcgsec111aincome,0)-Math.max(newstcgsec111aincome_jul,0)-Math.max(newltcgsec112,0)-Math.max(400000-newnormalincome,0),0)*0.15 +  Math.max(newltcgsec112aincome-(125000-Math.min(newltcgsec112aincome_jul,125000)),0)*0.1  + Math.max(newltcgsec112income_jul,0)*0.125 + Math.max(newltcgsec112aincome_jul-125000,0)*0.125 + Math.max(newwinninglottery+newvda,0)*0.3;
    }  else if(Math.max(newltcgsec112income_jul,0)+Math.max(newltcgsec112,0)+Math.max(newstcgsec111aincome_jul,0)+Math.max(newstcgsec111aincome,0)>400000){
       newtaxonspecialincome = Math.max(Math.max(newltcgsec112income_jul,0)-Math.max(newstcgsec111aincome,0)-Math.max(newstcgsec111aincome_jul,0)-Math.max(newltcgsec112,0)-Math.max(400000-newnormalincome,0),0)*0.125 +  Math.max(newltcgsec112aincome-(125000-Math.min(newltcgsec112aincome_jul,125000)),0)*0.1  +  Math.max(newltcgsec112aincome_jul-125000,0)*0.125 + Math.max(newwinninglottery+newvda,0)*0.3;
    }  else if(Math.max(newltcgsec112aincome_jul-125000,0)+Math.max(newltcgsec112income_jul,0)+Math.max(newltcgsec112,0)+Math.max(newstcgsec111aincome_jul,0)+Math.max(newstcgsec111aincome,0)>400000){
       newtaxonspecialincome = Math.max(Math.max(newltcgsec112aincome_jul-125000,0)-Math.max(newltcgsec112income_jul,0)-Math.max(newstcgsec111aincome,0)-Math.max(newstcgsec111aincome_jul,0)-Math.max(newltcgsec112,0)-Math.max(400000-newnormalincome,0),0)*0.125 +  Math.max(newltcgsec112aincome-(125000-Math.min(newltcgsec112aincome_jul,125000)),0)*0.1  +  Math.max(newwinninglottery+newvda,0)*0.3;
    }  else {
       newtaxonspecialincome = Math.max(Math.max(newltcgsec112aincome-(125000-Math.min(newltcgsec112aincome_jul,125000)),0)-Math.max(newltcgsec112aincome_jul-125000,0)-Math.max(newltcgsec112income_jul,0)-Math.max(newstcgsec111aincome,0)-Math.max(newstcgsec111aincome_jul,0)-Math.max(newltcgsec112,0)-Math.max(400000-newnormalincome),0)*0.1 +    Math.max(newwinninglottery+newvda,0)*0.3;
    } 
   
  } else
  { newtaxonspecialincome =  Math.max(newstcgsec111aincome,0)*0.15 + Math.max(newltcgsec112income,0)*0.2 + Math.max(newltcgsec112aincome-(125000-Math.min(newltcgsec112aincome_jul,125000)),0)*0.1 + Math.max(newstcgsec111aincome_jul,0)*0.2 + Math.max(newltcgsec112income_jul,0)*0.125 + Math.max(newltcgsec112aincome_jul-125000,0)*0.125 + Math.max(newwinninglottery+newvda,0)*0.3;
  }
    
    
    
    let newtaxbeforerebate = newtaxonnormalincome + newtaxonspecialincome;
    
    const selectedValue = document.querySelector('select[name="combo_list"]').value;
    
     //LTCG112A benefit not given from rebate
    
  //  if (newtotalincome<= 700000) {
    //    newrebate = Math.max(Math.min(newtotalincome,25000,newtaxbeforerebate-Math.max(newltcgsec112aincome-Math.min(125000,Math.max(newltcgsec112aincome_jul,0)))*0.1 - Math.max(newltcgsec112aincome_jul-125000,0)*0.125),0);
    // } else {
    
    
    if (selectedValue === "Govt_utility")
    {
         if (newnormalincome<=1200000)
         {
             newrebate = Math.max(Math.min(newtaxonnormalincome,60000),0);
         }
         else
         {
            newrebate = Math.max(Math.min(newtaxonnormalincome,60000) - (newnormalincome-1200000),0);
            
         }
         
    } else
    {
        if (newtotalincome<=1200000)
         {
             newrebate = Math.max(Math.min(newtaxbeforerebate,60000,newtaxbeforerebate-Math.max(newltcgsec112aincome-Math.min(125000,Math.max(newltcgsec112aincome_jul,0)))*0.1 - Math.max(newltcgsec112aincome_jul-125000,0)*0.125),0);
         }
         else
         {
            newrebate = Math.max(Math.max(Math.min(newtaxbeforerebate,newtaxbeforerebate-Math.max(newltcgsec112aincome-Math.min(125000,Math.max(newltcgsec112aincome_jul,0)))*0.1 - Math.max(newltcgsec112aincome_jul-125000,0)*0.125),0) - (newtotalincome-1200000),0);
         }
    }
    
     let newtaxbeforesurcharge=newtaxbeforerebate-newrebate;
    
     
     let newdividend= Number(document.getElementById('newregimedividendincome').textContent);
     let newdividendtax =(newdividend*newtaxonnormalincome)/newnormalincome;
     
    //new Surcharge
    
    if ((newnormalincome+newwinninglottery-newdividendincome) > 20000000) {
        // 25% surcharge for income exceeding Rs. 2 crore
        newsurcharge = (newtaxonnormalincome+newwinninglottery*0.3-newdividendtax) * 0.25+(newtaxonspecialincome+newdividendtax-newwinninglottery*0.3)*0.15;
    } else if ((newtotalincome) > 10000000) {
        // 15% surcharge for income exceeding Rs. 1 crore
        newsurcharge = newtaxbeforesurcharge * 0.15;
    } else if ((newtotalincome) > 5000000) {
        // 10% surcharge for income exceeding Rs. 50 lakh
        newsurcharge = newtaxbeforesurcharge * 0.10;
    } else {
        // No surcharge
        newsurcharge = 0;
    }
    
    
    
    //new Marginal Relief
    
    if (newtotalincome > 20000000) {
    newmarginalrelief = Math.max((newtaxbeforesurcharge + newsurcharge - 5580000) - (newtotalincome - 20000000), 0);
    } else if (newtotalincome > 10000000) {
    newmarginalrelief = Math.max((newtaxbeforesurcharge + newsurcharge - 2580000) - (newtotalincome - 10000000), 0);
    } else if (newtotalincome > 5000000) {
    newmarginalrelief = Math.max((newtaxbeforesurcharge + newsurcharge - 1080000) - (newtotalincome - 5000000), 0);
    } else {
    newmarginalrelief = 0;
    }

    let newtaxbeforecess = newtaxbeforesurcharge + newsurcharge - newmarginalrelief;
    let newcess = Math.max(0, newtaxbeforecess * 0.04);
    let newgrosstaxpayable = Math.max(newtaxbeforecess + newcess, 0);

    document.getElementById('newregimenormalincometax').textContent = newtaxonnormalincome.toFixed(2);
    document.getElementById('newregimespecialincometax').textContent = newtaxonspecialincome.toFixed(2);
    document.getElementById('newregimetaxbeforerebate').textContent = newtaxbeforerebate.toFixed(2);
    document.getElementById('newregimerebate87a').textContent = newrebate.toFixed(2);
    document.getElementById('newregimetaxbeforesurcharge').textContent = newtaxbeforesurcharge.toFixed(2);
    document.getElementById('newregimesurcharge').textContent = newsurcharge.toFixed(2);
    document.getElementById('newregimemarginalrelief').textContent = newmarginalrelief.toFixed(2);
    document.getElementById('newregimetaxbeforecess').textContent = newtaxbeforecess.toFixed(2);
    document.getElementById('newregimecess').textContent = newcess.toFixed(2);
    document.getElementById('newregimegrosstaxpayable').textContent = newgrosstaxpayable.toFixed(2);
    
    
    
    
}

    document.querySelectorAll("input, select, textarea, radio, checkbox").forEach(element => {
    element.addEventListener("input", function() {
      CalculateAllIncome();
      saveToLocalStorage(); // Save on every input
    });
    element.addEventListener("change", function() {
      CalculateAllIncome();
      saveToLocalStorage(); // Save on every change
    });
  });
        document.querySelectorAll('input, select').forEach(input => {
    // Clear all inputs
    input.dispatchEvent(new Event('input')); // Ye event trigger karega
  });
       //Page Load hone par CalculateAllIncome function run kar rha h jis se value blank ki jgh zero show ho rhi h resulted fields m
        CalculateAllIncome();
        saveToLocalStorage(); 
  loadFromLocalStorage(); // Load data when page loads
});
      //}else{
      //  alert("Don't waste your time for copying. This file is fully secured by Sumit Garg. If any query, Contact - Sumit Garg, Ph. No. - 9716804520, Email - SumitGarg100000@Gmail.com ");
      //    } 
    //   }   else      {       alert("This file is fully secured by Sumit Garg. If you face any problem then contact me. Name - Sumit Garg, Ph. No. - 9716804520, Email - SumitGarg100000@Gmail.com ");     }
    </script>

    
</body>
</html>
