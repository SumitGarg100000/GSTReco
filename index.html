
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Fully updated free income tax calculator for FY 2024-25(AY 2025-26). Calculate tax liability instantly under both old and new regimes with comparison.">
    <meta name="keywords" content="income tax calculator FY 2024-25, income tax calculator AY 2025-26, tax calculator AY 2025-26, tax calculation, Sumit Garg tax calculator, sumit garg income tax calculator ay 2025-26, sumit tax calculator fy 2024-25">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta property="og:title" content="Income Tax Calculator FY 2024-25">
    <meta property="og:image" content="https://sumitgarg100000.github.io/IncometaxCalculator/Image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Income Tax Calculator 2023-24 Preview">
    <meta name="google-site-verification" content="FR7D2qkpciz6QmllRnOJ7Mv6bbsFJ1CA6Qn7mYDkqwE" />
    <title>Income Tax Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* WhatsApp button styles */
        .whatsapp-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #25d366;
            color: white;
            border-radius: 50%;
            padding: 25px;
            text-align: center;
            box-shadow: 0 0 20px 10px rgba(37, 211, 102, 0.1);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            width: 60px;
            height: 60px;
            animation: glow 3s infinite;
            transition: all 0.3s ease;
        }

        .whatsapp-btn:hover {
            background-color: #128C7E;
            transform: scale(1.1);
            animation-play-state: paused;
        }

        .whatsapp-btn i {
            font-size: 30px;
        }

        @keyframes glow {
            0% { box-shadow: 0 0 20px 0px rgba(37, 211, 102, 0.2); transform: scale(1); }
            50% { box-shadow: 0 0 40px 20px rgba(37, 211, 102, 0.1); transform: scale(1.05); }
            100% { box-shadow: 0 0 20px 0px rgba(37, 211, 102, 0.2); transform: scale(1); }
        }

        .whatsapp-btn::after {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(37, 211, 102, 0.15) 0%, rgba(37, 211, 102, 0) 70%);
            animation: sparkle 3s infinite;
        }

        @keyframes sparkle {
            0% { opacity: 0.3; transform: scale(0.8); }
            50% { opacity: 0; transform: scale(1.5); }
            100% { opacity: 0.3; transform: scale(0.8); }
        }

        :root {
            --primary-color: #2C3E50;
            --secondary-color: #3498DB;
            --accent-color: #09D575;
            --text-light: #FFFFFF;
            --text-dark: #2C3E50;
            --table-header: #3498DB;
            --table-row-alt: #F8F9FA;
            --print-primary: #2C3E50;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            line-height: 1.6;
            background-color: #F8F9FA;
            color: var(--text-dark);
        }

        header {
            min-width: 800px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--text-light);
            padding: 1.5rem 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 2.25rem;
            margin-bottom: 0.75rem;
            font-weight: 600;
        }

        h2 {
            font-size: 1rem;
            font-weight: 400;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .table-container {
            max-width: 1200px;
            margin: 2rem auto;
            overflow-x: auto;
            background: var(--text-light);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border: 1px solid #E0E0E0;
            font-size: 0.9rem;
        }

        th {
            background-color: var(--table-header);
            color: var(--text-light);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.85rem;
        }

        tr:nth-child(even) { background-color: #f9f9f9; }
        tr:nth-child(odd) { background-color: #ffffff; }
        tr:hover { background-color: #E8F4FD; }

        input[type="number"],
        input[type="text"],
        select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #DEE2E6;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .button-container {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin: 1rem 0;
            padding: 0 2rem;
        }

        .button {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 6px;
            background: var(--secondary-color);
            color: var(--text-light);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .button:hover {
            background: var(--primary-color);
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
        }

        footer {
            min-width: 800px;
            background: var(--primary-color);
            color: var(--text-light);
            padding: 1rem;
            text-align: center;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--text-light);
            text-decoration: none;
            opacity: 0.9;
            transition: opacity 0.3s ease;
        }

        .footer-links a:hover {
            opacity: 1;
            text-decoration: underline;
        }

        @media print {
            .whatsapp-btn, .button-container {
                display: none !important;
            }

            @page {
                margin: 1cm;
                size: auto;
            }

            body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
                background: white !important;
                font-size: 12pt;
            }

            header, footer {
                background: var(--print-primary) !important;
            }

            table {
                page-break-inside: avoid;
            }

            tr.page-break {
                page-break-before: always;
            }

            th {
                background-color: var(--print-primary) !important;
            }
        }

        @media (max-width: 768px) {
            h1 { font-size: 1.75rem; }
            .table-container { margin: 1rem; border-radius: 8px; }
            th, td { padding: 0.75rem; font-size: 0.85rem; }
            .button { padding: 0.6rem 1rem; font-size: 0.9rem; }
        }

        @media (max-width: 480px) {
            h1 { font-size: 1.5rem; }
            .footer-links { flex-direction: column; gap: 0.5rem; }
            .button-container { flex-direction: column; align-items: flex-end; }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Income Tax Calculator</h1>
            <h2>Disclaimer - This calculator is made after incorporating all the relevant provisions of Income Tax Act applicable for FY 2024-25 (AY 2025-26)</h2>
            <div class="button-container">
                <button class="button" onclick="resetValues()">Reset</button>
                <button class="button" onclick="printPDF()">Print as PDF</button>
                <button class="button" onclick="exportToJSON()">Export to JSON</button>
                <input type="file" id="importFile" style="display: none;" accept=".json" onchange="importFromJSON(event)">
                <button class="button" onclick="document.getElementById('importFile').click()">Import from JSON</button>
            </div>
        </div>
    </header>

    <div class="table-container">
        <table id="incomeTable">
            <tr><td colspan="4" style="text-align: center; background-color: #49A5E3;"><strong>Basic Details</strong></td></tr>
            <tr><td>Name</td><td><input type="text" id="Name"></td><td>Aadhaar Number</td><td><input type="number" id="Aadhaar Number"></td></tr>
            <tr><td>PAN Number</td><td><input type="text" id="PAN Number"></td><td>Mobile Number</td><td><input type="number" id="Mobile Number"></td></tr>
            <tr><td>Father Name</td><td><input type="text" id="Father Name"></td><td>Email ID</td><td><input type="text" id="Email ID"></td></tr>
            <tr><td>Age</td><td><input type="number" id="age"></td><td>Bank A/c No.</td><td><input type="number" id="Bank A/c No."></td></tr>
            <tr><td>Address</td><td><input type="text" id="Address"></td><td>IFSC Code</td><td><input type="text" id="IFSC Code"></td></tr>
            <tr><td>Assessment Year</td><td style="text-align: left;">2025-26</td><td>MICR Code</td><td><input type="number" id="MICR Code"></td></tr>
            <tr><td>Marginal Relief</td><td><select name="combo_list" id="combo_list"><option value="Govt_utility">Govt. utility</option><option value="Conceptual">Conceptual</option></select></td><td>Type (Saving/Current)</td><td><input type="text" id="Type (Saving/Current)"></td></tr>

            <tr class="page-break" style="background-color: #839c9a;"><td>Particulars</td><td>Amount</td><td>Old Tax Regime</td><td>New Tax Regime</td></tr>
            <tr><td colspan="4" style="text-align: center; background-color: #49A5E3;"><strong>Income from Salary</strong></td></tr>
            <tr><td>Basic Salary</td><td><input type="number" id="basicsalary"></td><td id="oldregimebasicsalary"></td><td id="newregimebasicsalary"></td></tr>
            <tr><td>House Rent Allowance (HRA)</td><td><input type="number" id="hra"></td><td id="oldregimehra"></td><td id="newregimehra"></td></tr>
            <tr><td>Bonus</td><td><input type="number" id="bonus"></td><td id="oldregimebonus"></td><td id="newregimebonus"></td></tr>
            <tr><td>Special Allowance</td><td><input type="number" id="specialallowance"></td><td id="oldregimespecialallowance"></td><td id="newregimespecialallowance"></td></tr>
            <tr><td>Other Allowance</td><td><input type="number" id="otherallowance"></td><td id="oldregimeotherallowance"></td><td id="newregimeotherallowance"></td></tr>
            <tr style="background-color: #f9f9f9;"><td><strong>Gross Salary</strong></td><td id="grosssalary"></td><td id="oldregimegrosssalary"></td><td id="newregimegrosssalary"></td></tr>
            <tr style="background-color: #f9f9f9;"><td colspan="4"><strong>Deductions and Exemptions</strong></td></tr>
            <tr><td>Exemption under Sec 10(13A)</td><td><input type="number" id="exemptionsec13a"></td><td id="oldregimeexemptionsec13a"></td><td id="newregimeexemptionsec13a"></td></tr>
            <tr><td>Any Other Exemption</td><td><input type="number" id="otherexemption"></td><td id="oldregimeotherexemption"></td><td id="newregimeotherexemption"></td></tr>
            <tr><td>Professional Tax Deduction</td><td><input type="number" id="professionaltax"></td><td id="oldregimeprofessionaltax"></td><td id="newregimeprofessionaltax"></td></tr>
            <tr><td>Standard Deduction</td><td id="standarddeduction"></td><td id="oldregimestandarddeduction"></td><td id="newregimestandarddeduction"></td></tr>
            <tr style="background-color: #77D5B6;"><td><strong>Net Salary</strong></td><td id="netsalary"></td><td id="oldregimenetsalary"></td><td id="newregimenetsalary"></td></tr>

            <tr class="page-break"><td colspan="4" style="text-align: center; background-color: #49A5E3;"><strong>Income from House Property</strong></td></tr>
            <tr><td>Gross Annual Value</td><td><input type="number" id="grossannualvalue"></td><td id="oldregimegrossannualvalue"></td><td id="newregimegrossannualvalue"></td></tr>
            <tr><td>Municipal Taxes Paid</td><td><input type="number" id="municipaltaxes"></td><td id="oldregimemunicipaltaxes"></td><td id="newregimemunicipaltaxes"></td></tr>
            <tr><td>Net Annual Value (NAV)</td><td id="nav"></td><td id="oldregimenav"></td><td id="newregimenav"></td></tr>
            <tr><td>Standard Deduction @30%</td><td id="standarddeductionhp"></td><td id="oldregimestandarddeductionhp"></td><td id="newregimestandarddeductionhp"></td></tr>
            <tr><td>Interest on House Property (Let-out)</td><td><input type="number" id="interestletout"></td><td id="oldregimeinterestletout"></td><td id="newregimeinterestletout"></td></tr>
            <tr><td>Interest on House Property (Self-occupied)</td><td><input type="number" id="interestselfoccupied"></td><td id="oldregimeinterestselfoccupied"></td><td id="newregimeinterestselfoccupied"></td></tr>
            <tr style="background-color: #77D5B6;"><td><strong>Net Income from House Property</strong></td><td id="netincomehp"></td><td id="oldregimenetincomehp"></td><td id="newregimenetincomehp"></td></tr>

            <tr><td colspan="4" style="text-align: center; background-color: #49A5E3;"><strong>Income from PGBP</strong></td></tr>
            <tr><td>Gross Turnover</td><td><input type="number" id="grossturnover"></td><td id="oldregimegrossturnover"></td><td id="newregimegrossturnover"></td></tr>
            <tr><td>% of Profit (Min 6%/8%/50%)</td><td><input type="number" id="percentprofit" value="6" min="6" max="50"></td><td id="oldregimepercentprofit"></td><td id="newregimepercentprofit"></td></tr>
            <tr><td>Net Profit u/s 44AD and 44ADA</td><td id="netprofit44ad"></td><td id="oldregimenetprofit44ad"></td><td id="newregimenetprofit44ad"></td></tr>
            <tr><td>Normal Business Income</td><td><input type="number" id="normalbusinessincome"></td><td id="oldregimenormalbusinessincome"></td><td id="newregimenormalbusinessincome"></td></tr>
            <tr style="background-color: #77D5B6;"><td><strong>Net Income from PGBP</strong></td><td id="netincomepgbp"></td><td id="oldregimenetincomepgbp"></td><td id="newregimenetincomepgbp"></td></tr>

            <tr class="page-break"><td colspan="4" style="text-align: center; background-color: #49A5E3;"><strong>Income from Capital Gain (Before 23.07.2024)</strong></td></tr>
            <tr><td>STCG U/S Sec 111-Slab Rate</td><td><input type="number" id="stcgsec111"></td><td id="oldregimestcgsec111"></td><td id="newregimestcgsec111"></td></tr>
            <tr><td>STCG U/S 111A@15%</td><td><input type="number" id="stcgsec111a"></td><td id="oldregimestcgsec111a"></td><td id="newregimestcgsec111a"></td></tr>
            <tr><td>LTCG U/S 112@20%(with indexation)</td><td><input type="number" id="ltcgsec112"></td><td id="oldregimeltcgsec112"></td><td id="newregimeltcgsec112"></td></tr>
            <tr><td>LTCG U/S 112A@10%(Exemption - 1.25 Lakh)</td><td><input type="number" id="ltcgsec112a"></td><td id="oldregimeltcgsec112a"></td><td id="newregimeltcgsec112a"></td></tr>

            <tr><td colspan="4" style="text-align: center; background-color: #49A5E3;"><strong>Income from Capital Gain (On or after 23.07.2024)</strong></td></tr>
            <tr><td>STCG U/S Sec 111-Slab Rate</td><td><input type="number" id="stcgsec111_jul"></td><td id="oldregimestcgsec111_jul"></td><td id="newregimestcgsec111_jul"></td></tr>
            <tr><td>STCG U/S 111A@20%</td><td><input type="number" id="stcgsec111a_jul"></td><td id="oldregimestcgsec111a_jul"></td><td id="newregimestcgsec111a_jul"></td></tr>
            <tr><td>LTCG U/S 112@12.5%(without indexation)</td><td><input type="number" id="ltcgsec112_jul"></td><td id="oldregimeltcgsec112_jul"></td><td id="newregimeltcgsec112_jul"></td></tr>
            <tr><td>LTCG U/S 112A@12.5%(Exemption - 1.25 Lakh)</td><td><input type="number" id="ltcgsec112a_jul"></td><td id="oldregimeltcgsec112a_jul"></td><td id="newregimeltcgsec112a_jul"></td></tr>
            <tr style="background-color: #77D5B6;"><td><strong>Net Income from Capital Gain</strong></td><td id="netcapitalgain"></td><td id="oldregimenetcapitalgain"></td><td id="newregimenetcapitalgain"></td></tr>

            <tr><td colspan="4" style="text-align: center; background-color: #49A5E3;"><strong>Income from Other Sources</strong></td></tr>
            <tr><td>Dividend Income</td><td><input type="number" id="dividendincome"></td><td id="oldregimedividendincome"></td><td id="newregimedividendincome"></td></tr>
            <tr><td>Interest from Saving Bank</td><td><input type="number" id="interestsavingbank"></td><td id="oldregimeinterestsavingbank"></td><td id="newregimeinterestsavingbank"></td></tr>
            <tr><td>Interest from FD</td><td><input type="number" id="interestfd"></td><td id="oldregimeinterestfd"></td><td id="newregimeinterestfd"></td></tr>
            <tr><td>Winning from Lottery</td><td><input type="number" id="winninglottery"></td><td id="oldregimewinninglottery"></td><td id="newregimewinninglottery"></td></tr>
            <tr><td>Any Other Income</td><td><input type="number" id="otherincome"></td><td id="oldregimeotherincome"></td><td id="newregimeotherincome"></td></tr>
            <tr style="background-color: #77D5B6;"><td><strong>Net Income from Other Sources</strong></td><td id="netothersources"></td><td id="oldregimenetothersources"></td><td id="newregimenetothersources"></td></tr>

            <tr><td colspan="4" style="text-align: center; background-color: #49A5E3;"><strong>Income from Virtual Digital Asset</strong></td></tr>
            <tr><td>VDA Income</td><td><input type="number" id="vda"></td><td id="oldregimevda"></td><td id="newregimevda"></td></tr>
            <tr style="background-color: #77D5B6;"><td><strong>Net Income from VDA</strong></td><td id="netvda"></td><td id="oldregimenetvda"></td><td id="newregimenetvda"></td></tr>

            <tr class="page-break" style="background-color: #4EB26E;"><td><strong>Gross Total Income</strong></td><td id="grosstotalincome"></td><td id="oldregimegrosstotalincome"></td><td id="newregimegrosstotalincome"></td></tr>

            <tr><td colspan="4" style="text-align: center; background-color: #49A5E3;"><strong>Deductions</strong></td></tr>
            <tr><td>Deductions u/s 80C</td><td><input type="number" id="deduction80c"></td><td id="oldregimededuction80c"></td><td id="newregimededuction80c"></td></tr>
            <tr><td>Deduction u/s 80CCC</td><td><input type="number" id="deduction80ccc"></td><td id="oldregimededuction80ccc"></td><td id="newregimededuction80ccc"></td></tr>
            <tr><td>Deductions u/s 80CCD(1)</td><td><input type="number" id="deduction80ccd1"></td><td id="oldregimededuction80ccd1"></td><td id="newregimededuction80ccd1"></td></tr>
            <tr><td>Restrict 80C, 80CCC, 80CCD(1) upto 150000</td><td><id="restrictdeduction" value=""></td><td id="oldregimerestrictdeduction"></td><td id="newregimerestrictdeduction"></td></tr>
            <tr><td>Deductions u/s 80CCD(1B)</td><td><input type="number" id="deduction80ccd1b"></td><td id="oldregimededuction80ccd1b"></td><td id="newregimededuction80ccd1b"></td></tr>
            <tr><td>Deductions u/s 80CCD(2)</td><td><input type="number" id="deduction80ccd2"></td><td id="oldregimededuction80ccd2"></td><td id="newregimededuction80ccd2"></td></tr>
            <tr><td>Deductions u/s 80D</td><td><input type="number" id="deduction80d"></td><td id="oldregimededuction80d"></td><td id="newregimededuction80d"></td></tr>
            <tr><td>Deductions u/s 80G</td><td><input type="number" id="deduction80g"></td><td id="oldregimededuction80g"></td><td id="newregimededuction80g"></td></tr>
            <tr><td>Deductions u/s 80E</td><td><input type="number" id="deduction80e"></td><td id="oldregimededuction80e"></td><td id="newregimededuction80e"></td></tr>
            <tr><td>Deductions u/s 80EE</td><td><input type="number" id="deduction80ee"></td><td id="oldregimededuction80ee"></td><td id="newregimededuction80ee"></td></tr>
            <tr><td>Deductions u/s 80TTA</td><td><input type="number" id="deduction80tta"></td><td id="oldregimededuction80tta"></td><td id="newregimededuction80tta"></td></tr>
            <tr><td>Deductions u/s 80TTB</td><td><input type="number" id="deduction80ttb"></td><td id="oldregimededuction80ttb"></td><td id="newregimededuction80ttb"></td></tr>
            <tr><td>Any other deduction</td><td><input type="number" id="anyotherdeduction"></td><td id="oldregimeanyotherdeduction"></td><td id="newregimeanyotherdeduction"></td></tr>
            <tr><td>Total Deductions</td><td id="totaldeduction"></td><td id="oldregimetotaldeduction"></td><td id="newregimetotaldeduction"></td></tr>
            <tr style="background-color: #f9f9f9;"><td><strong>Max Deductions allowed</strong></td><td id="eligiblededuction"></td><td id="oldregimeeligiblededuction"></td><td id="newregimeeligiblededuction"></td></tr>

            <tr class="page-break" style="background-color: #77D5B6;"><td><strong>Net Taxable Income after Deductions</strong></td><td id="netincome"></td><td id="oldregimenetincome"></td><td id="newregimenetincome"></td></tr>
            <tr style="background-color: #4EB26E;"><td><strong>Net Taxable Income Rounding off u/s 288A</strong></td><td id="roundoff"></td><td id="oldregimeroundoff"></td><td id="newregimeroundoff"></td></tr>
            <tr><td>Tax on Normal Income</td><td></td><td id="oldregimenormalincometax"></td><td id="newregimenormalincometax"></td></tr>
            <tr><td>Tax on Special Income</td><td></td><td id="oldregimespecialincometax"></td><td id="newregimespecialincometax"></td></tr>
            <tr><td>Total Tax before Rebate</td><td></td><td id="oldregimetaxbeforerebate"></td><td id="newregimetaxbeforerebate"></td></tr>
            <tr><td>Rebate U/s 87A</td><td></td><td id="oldregimerebate87a"></td><td id="newregimerebate87a"></td></tr>
            <tr><td>Total Tax before Surcharge</td><td></td><td id="oldregimetaxbeforesurcharge"></td><td id="newregimetaxbeforesurcharge"></td></tr>
            <tr><td>Surcharge</td><td></td><td id="oldregimesurcharge"></td><td id="newregimesurcharge"></td></tr>
            <tr><td>Marginal Relief</td><td></td><td id="oldregimemarginalrelief"></td><td id="newregimemarginalrelief"></td></tr>
            <tr><td>Total Tax before Cess</td><td></td><td id="oldregimetaxbeforecess"></td><td id="newregimetaxbeforecess"></td></tr>
            <tr><td>Cess@4%</td><td></td><td id="oldregimecess"></td><td id="newregimecess"></td></tr>
            <tr style="background-color: #F73F09;"><td>Gross Tax Payable</td><td></td><td id="oldregimegrosstaxpayable"></td><td id="newregimegrosstaxpayable"></td></tr>

            <tr><td colspan="4" style="text-align: center; background-color: #49A5E3;"><strong>Details of Carry forward losses for 8 AY</strong></td></tr>
            <tr><td>Loss from House Property</td><td><input type="number" id="hploss"></td><td id="oldregimehploss"></td><td id="newregimehploss"></td></tr>
            <tr><td>Loss from PGBP</td><td><input type="number" id="pgbploss"></td><td id="oldregimepgbploss"></td><td id="newregimepgbploss"></td></tr>
            <tr><td>Loss from STCG</td><td><input type="number" id="stcgloss"></td><td id="oldregimestcgloss"></td><td id="newregimestcgloss"></td></tr>
            <tr><td>Loss from LTCG</td><td><input type="number" id="ltcgloss"></td><td id="oldregimeltcgloss"></td><td id="newregimeltcgloss"></td></tr>
        </table>
    </div>

    <a href="https://wa.me/9716804520" class="whatsapp-btn" target="_blank" rel="noopener noreferrer" aria-label="Chat on WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>

    <footer>
        <div class="footer-links">
            <a href="#">📞 Ph: 9716804520</a>
            <a href="#">✉️ Email: Sumitgarg100000@gmail.com</a>
            <a href="#">📍 Address: Rohini, Delhi-110086</a>
        </div>
        <div class="footer-links">
            <a href="#">Privacy Policy</a>
            <a href="#">Terms of Service</a>
        </div>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            loadDataFromStorage();
            CalculateAllIncome();

            document.querySelectorAll("input, select").forEach(element => {
                element.addEventListener("input", () => {
                    saveDataToStorage();
                    CalculateAllIncome();
                });
                element.addEventListener("change", () => {
                    saveDataToStorage();
                    CalculateAllIncome();
                });
            });
        });

        function printPDF() {
            window.print();
        }

        function resetValues() {
            localStorage.removeItem('taxCalculatorData');
            document.querySelectorAll('input[type="number"], input[type="text"]').forEach(input => {
                input.value = '';
            });
            document.getElementById('percentprofit').value = '6';
            document.getElementById('combo_list').value = 'Govt_utility';
            CalculateAllIncome();
        }

        function loadDataFromStorage() {
            const savedData = localStorage.getItem('taxCalculatorData');
            if (savedData) {
                const data = JSON.parse(savedData);
                Object.keys(data).forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.value = data[id] || '';
                    }
                });
            }
        }

        function saveDataToStorage() {
            const inputs = document.querySelectorAll('input[type="number"], input[type="text"], select');
            const data = {};
            inputs.forEach(input => {
                data[input.id] = input.value;
            });
            localStorage.setItem('taxCalculatorData', JSON.stringify(data));
        }

        function exportToJSON() {
            const inputs = document.querySelectorAll('input[type="number"], input[type="text"], select');
            const data = {};
            inputs.forEach(input => {
                data[input.id] = input.value;
            });
            const jsonData = JSON.stringify(data, null, 2);
            const blob = new Blob([jsonData], { type: "application/json" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'taxCalculatorData.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function importFromJSON(event) {
            const file = event.target.files[0];
            if (!file) {
                alert("No file selected! Please select a JSON file.");
                return;
            }
            if (!file.name.endsWith('.json')) {
                alert("Please select a valid JSON file (ending with .json)!");
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                const content = e.target.result.trim();
                if (!content) {
                    alert("The selected JSON file is empty!");
                    return;
                }

                try {
                    const data = JSON.parse(content);
                    if (typeof data !== 'object' || data === null) {
                        alert("Invalid JSON format! Data must be an object.");
                        return;
                    }
                    if (Object.keys(data).length === 0) {
                        alert("JSON file is valid but contains no data!");
                        return;
                    }

                    Object.keys(data).forEach(id => {
                        const element = document.getElementById(id);
                        if (element) {
                            element.value = data[id] === null || data[id] === undefined ? '' : data[id];
                        }
                    });
                    saveDataToStorage();
                    CalculateAllIncome();
                } catch (error) {
                    alert("Error parsing JSON file: " + error.message);
                    console.error("Parse error:", error);
                }
            };
            reader.onerror = function() {
                alert("Error reading the file!");
            };
            reader.readAsText(file);
            document.getElementById('importFile').value = '';
        }

        function CalculateAllIncome() {
            // Income from Salary
            let oldbasicsalary = Math.max(0, Number(document.getElementById('basicsalary').value) || 0);
            let oldhra = Math.max(0, Number(document.getElementById('hra').value) || 0);
            let oldbonus = Math.max(0, Number(document.getElementById('bonus').value) || 0);
            let oldspecialallowance = Math.max(0, Number(document.getElementById('specialallowance').value) || 0);
            let oldotherallowance = Math.max(0, Number(document.getElementById('otherallowance').value) || 0);
            let oldgrosssalary = oldbasicsalary + oldhra + oldbonus + oldspecialallowance + oldotherallowance;
            let oldexemptionsec13a = Math.min(Math.max(0, Number(document.getElementById('exemptionsec13a').value) || 0), oldgrosssalary);
            let oldotherexemption = Math.min(Math.max(0, Number(document.getElementById('otherexemption').value) || 0), oldgrosssalary - oldexemptionsec13a);
            let oldprofessionaltax = Math.min(Math.max(0, Number(document.getElementById('professionaltax').value) || 0), oldgrosssalary - oldexemptionsec13a - oldotherexemption);
            let oldstandarddeduction = Math.min((oldgrosssalary - (oldexemptionsec13a + oldotherexemption + oldprofessionaltax)), 50000);
            let oldnetsalary = oldgrosssalary - (oldexemptionsec13a + oldotherexemption + oldprofessionaltax + oldstandarddeduction);

            let newbasicsalary = Math.max(0, Number(document.getElementById('basicsalary').value) || 0);
            let newhra = Math.max(0, Number(document.getElementById('hra').value) || 0);
            let newbonus = Math.max(0, Number(document.getElementById('bonus').value) || 0);
            let newspecialallowance = Math.max(0, Number(document.getElementById('specialallowance').value) || 0);
            let newotherallowance = Math.max(0, Number(document.getElementById('otherallowance').value) || 0);
            let newgrosssalary = newbasicsalary + newhra + newbonus + newspecialallowance + newotherallowance;
            let newexemptionsec13a = 0;
            let newotherexemption = 0;
            let newprofessionaltax = 0;
            let newstandarddeduction = Math.min((newgrosssalary - (newexemptionsec13a + newotherexemption + newprofessionaltax)), 75000);
            let newnetsalary = newgrosssalary - (newexemptionsec13a + newotherexemption + newprofessionaltax + newstandarddeduction);

            document.getElementById('oldregimebasicsalary').textContent = oldbasicsalary.toFixed(2);
            document.getElementById('oldregimehra').textContent = oldhra.toFixed(2);
            document.getElementById('oldregimebonus').textContent = oldbonus.toFixed(2);
            document.getElementById('oldregimespecialallowance').textContent = oldspecialallowance.toFixed(2);
            document.getElementById('oldregimeotherallowance').textContent = oldotherallowance.toFixed(2);
            document.getElementById('oldregimegrosssalary').textContent = oldgrosssalary.toFixed(2);
            document.getElementById('oldregimeexemptionsec13a').textContent = oldexemptionsec13a.toFixed(2);
            document.getElementById('oldregimeotherexemption').textContent = oldotherexemption.toFixed(2);
            document.getElementById('oldregimeprofessionaltax').textContent = oldprofessionaltax.toFixed(2);
            document.getElementById('oldregimestandarddeduction').textContent = oldstandarddeduction.toFixed(2);
            document.getElementById('oldregimenetsalary').textContent = oldnetsalary.toFixed(2);
            document.getElementById('newregimebasicsalary').textContent = newbasicsalary.toFixed(2);
            document.getElementById('newregimehra').textContent = newhra.toFixed(2);
            document.getElementById('newregimebonus').textContent = newbonus.toFixed(2);
            document.getElementById('newregimespecialallowance').textContent = newspecialallowance.toFixed(2);
            document.getElementById('newregimeotherallowance').textContent = newotherallowance.toFixed(2);
            document.getElementById('newregimegrosssalary').textContent = newgrosssalary.toFixed(2);
            document.getElementById('newregimeexemptionsec13a').textContent = newexemptionsec13a.toFixed(2);
            document.getElementById('newregimeotherexemption').textContent = newotherexemption.toFixed(2);
            document.getElementById('newregimeprofessionaltax').textContent = newprofessionaltax.toFixed(2);
            document.getElementById('newregimestandarddeduction').textContent = newstandarddeduction.toFixed(2);
            document.getElementById('newregimenetsalary').textContent = newnetsalary.toFixed(2);

            // Income from House Property
            let oldgrossannualvalue = Math.max(0, Number(document.getElementById('grossannualvalue').value) || 0);
            let oldmunicipaltaxes = Math.min(Math.max(0, Number(document.getElementById('municipaltaxes').value) || 0), oldgrossannualvalue);
            let oldnav = oldgrossannualvalue - oldmunicipaltaxes;
            let oldstandarddeductionhp = oldnav * 0.3;
            let oldinterestletout = Math.max(0, Number(document.getElementById('interestletout').value) || 0);
            let oldinterestselfoccupied = Math.min(Math.max(0, Number(document.getElementById('interestselfoccupied').value) || 0), 200000);

            let newgrossannualvalue = Math.max(0, Number(document.getElementById('grossannualvalue').value) || 0);
            let newmunicipaltaxes = Math.min(Math.max(0, Number(document.getElementById('municipaltaxes').value) || 0), newgrossannualvalue);
            let newnav = newgrossannualvalue - newmunicipaltaxes;
            let newstandarddeductionhp = newnav * 0.3;
            let newinterestletout = Math.max(0, Number(document.getElementById('interestletout').value) || 0);
            let newinterestselfoccupied = 0;
            let newnetincomehp = Math.max((newnav - newstandarddeductionhp - newinterestletout - newinterestselfoccupied), 0);

            document.getElementById('oldregimegrossannualvalue').textContent = oldgrossannualvalue.toFixed(2);
            document.getElementById('oldregimemunicipaltaxes').textContent = oldmunicipaltaxes.toFixed(2);
            document.getElementById('oldregimenav').textContent = oldnav.toFixed(2);
            document.getElementById('oldregimestandarddeductionhp').textContent = oldstandarddeductionhp.toFixed(2);
            document.getElementById('oldregimeinterestletout').textContent = oldinterestletout.toFixed(2);
            document.getElementById('oldregimeinterestselfoccupied').textContent = oldinterestselfoccupied.toFixed(2);
            document.getElementById('newregimegrossannualvalue').textContent = newgrossannualvalue.toFixed(2);
            document.getElementById('newregimemunicipaltaxes').textContent = newmunicipaltaxes.toFixed(2);
            document.getElementById('newregimenav').textContent = newnav.toFixed(2);
            document.getElementById('newregimestandarddeductionhp').textContent = newstandarddeductionhp.toFixed(2);
            document.getElementById('newregimeinterestletout').textContent = newinterestletout.toFixed(2);
            document.getElementById('newregimeinterestselfoccupied').textContent = newinterestselfoccupied.toFixed(2);
            document.getElementById('newregimenetincomehp').textContent = newnetincomehp.toFixed(2);

            // Income from PGBP
            let oldgrossturnover = Math.max(0, Number(document.getElementById('grossturnover').value) || 0);
            let oldpercentprofit = Math.max(6, Math.min(50, Number(document.getElementById('percentprofit').value) || 6));
            let oldnormalbusinessincome = Number(document.getElementById('normalbusinessincome').value) || 0;
            let newgrossturnover = Math.max(0, Number(document.getElementById('grossturnover').value) || 0);
            let newpercentprofit = Math.max(6, Math.min(50, Number(document.getElementById('percentprofit').value) || 6));
            let newnormalbusinessincome = Number(document.getElementById('normalbusinessincome').value) || 0;

            let oldnetprofit44ad = oldgrossturnover * (oldpercentprofit / 100);
            let newnetprofit44ad = newgrossturnover * (newpercentprofit / 100);

            document.getElementById('oldregimegrossturnover').textContent = oldgrossturnover.toFixed(2);
            document.getElementById('oldregimepercentprofit').textContent = oldpercentprofit.toFixed(2);
            document.getElementById('oldregimenetprofit44ad').textContent = oldnetprofit44ad.toFixed(2);
            document.getElementById('oldregimenormalbusinessincome').textContent = oldnormalbusinessincome.toFixed(2);
            document.getElementById('newregimegrossturnover').textContent = newgrossturnover.toFixed(2);
            document.getElementById('newregimepercentprofit').textContent = newpercentprofit.toFixed(2);
            document.getElementById('newregimenetprofit44ad').textContent = newnetprofit44ad.toFixed(2);
            document.getElementById('newregimenormalbusinessincome').textContent = newnormalbusinessincome.toFixed(2);

            // Income from Capital Gain (Before 23.07.2024)
            let oldstcgsec111 = Number(document.getElementById('stcgsec111').value) || 0;
            let oldstcgsec111a = Number(document.getElementById('stcgsec111a').value) || 0;
            let oldltcgsec112 = Number(document.getElementById('ltcgsec112').value) || 0;
            let oldltcgsec112a = Number(document.getElementById('ltcgsec112a').value) || 0;
            let newstcgsec111 = Number(document.getElementById('stcgsec111').value) || 0;
            let newstcgsec111a = Number(document.getElementById('stcgsec111a').value) || 0;
            let newltcgsec112 = Number(document.getElementById('ltcgsec112').value) || 0;
            let newltcgsec112a = Number(document.getElementById('ltcgsec112a').value) || 0;

            document.getElementById('oldregimestcgsec111').textContent = oldstcgsec111.toFixed(2);
            document.getElementById('oldregimestcgsec111a').textContent = oldstcgsec111a.toFixed(2);
            document.getElementById('oldregimeltcgsec112').textContent = oldltcgsec112.toFixed(2);
            document.getElementById('oldregimeltcgsec112a').textContent = oldltcgsec112a.toFixed(2);
            document.getElementById('newregimestcgsec111').textContent = newstcgsec111.toFixed(2);
            document.getElementById('newregimestcgsec111a').textContent = newstcgsec111a.toFixed(2);
            document.getElementById('newregimeltcgsec112').textContent = newltcgsec112.toFixed(2);
            document.getElementById('newregimeltcgsec112a').textContent = newltcgsec112a.toFixed(2);

            // Income from Capital Gain (On or after 23.07.2024)
            let oldstcgsec111_jul = Number(document.getElementById('stcgsec111_jul').value) || 0;
            let oldstcgsec111a_jul = Number(document.getElementById('stcgsec111a_jul').value) || 0;
            let oldltcgsec112_jul = Number(document.getElementById('ltcgsec112_jul').value) || 0;
            let oldltcgsec112a_jul = Number(document.getElementById('ltcgsec112a_jul').value) || 0;
            let newstcgsec111_jul = Number(document.getElementById('stcgsec111_jul').value) || 0;
            let newstcgsec111a_jul = Number(document.getElementById('stcgsec111a_jul').value) || 0;
            let newltcgsec112_jul = Number(document.getElementById('ltcgsec112_jul').value) || 0;
            let newltcgsec112a_jul = Number(document.getElementById('ltcgsec112a_jul').value) || 0;

            let oldnetcapitalgain = Math.max(oldstcgsec111 + oldstcgsec111a + oldltcgsec112 + oldltcgsec112a + oldstcgsec111_jul + oldstcgsec111a_jul + oldltcgsec112_jul + oldltcgsec112a_jul, 0);
            let newnetcapitalgain = Math.max(newstcgsec111 + newstcgsec111a + newltcgsec112 + newltcgsec112a + newstcgsec111_jul + newstcgsec111a_jul + newltcgsec112_jul + newltcgsec112a_jul, 0);

            document.getElementById('oldregimestcgsec111_jul').textContent = oldstcgsec111_jul.toFixed(2);
            document.getElementById('oldregimestcgsec111a_jul').textContent = oldstcgsec111a_jul.toFixed(2);
            document.getElementById('oldregimeltcgsec112_jul').textContent = oldltcgsec112_jul.toFixed(2);
            document.getElementById('oldregimeltcgsec112a_jul').textContent = oldltcgsec112a_jul.toFixed(2);
            document.getElementById('oldregimenetcapitalgain').textContent = oldnetcapitalgain.toFixed(2);
            document.getElementById('newregimestcgsec111_jul').textContent = newstcgsec111_jul.toFixed(2);
            document.getElementById('newregimestcgsec111a_jul').textContent = newstcgsec111a_jul.toFixed(2);
            document.getElementById('newregimeltcgsec112_jul').textContent = newltcgsec112_jul.toFixed(2);
            document.getElementById('newregimeltcgsec112a_jul').textContent = newltcgsec112a_jul.toFixed(2);
            document.getElementById('newregimenetcapitalgain').textContent = newnetcapitalgain.toFixed(2);

            // Income from Other Sources
            let olddividendincome = Math.max(0, Number(document.getElementById('dividendincome').value) || 0);
            let oldinterestsavingbank = Math.max(0, Number(document.getElementById('interestsavingbank').value) || 0);
            let oldinterestfd = Math.max(0, Number(document.getElementById('interestfd').value) || 0);
            let oldwinninglottery = Math.max(0, Number(document.getElementById('winninglottery').value) || 0);
            let oldotherincome = Math.max(0, Number(document.getElementById('otherincome').value) || 0);
            let oldnetothersources = olddividendincome + oldinterestsavingbank + oldinterestfd + oldwinninglottery + oldotherincome;

            let newdividendincome = Math.max(0, Number(document.getElementById('dividendincome').value) || 0);
            let newinterestsavingbank = Math.max(0, Number(document.getElementById('interestsavingbank').value) || 0);
            let newinterestfd = Math.max(0, Number(document.getElementById('interestfd').value) || 0);
            let newwinninglottery = Math.max(0, Number(document.getElementById('winninglottery').value) || 0);
            let newotherincome = Math.max(0, Number(document.getElementById('otherincome').value) || 0);
            let newnetothersources = newdividendincome + newinterestsavingbank + newinterestfd + newwinninglottery + newotherincome;

            document.getElementById('oldregimedividendincome').textContent = olddividendincome.toFixed(2);
            document.getElementById('oldregimeinterestsavingbank').textContent = oldinterestsavingbank.toFixed(2);
            document.getElementById('oldregimeinterestfd').textContent = oldinterestfd.toFixed(2);
            document.getElementById('oldregimewinninglottery').textContent = oldwinninglottery.toFixed(2);
            document.getElementById('oldregimeotherincome').textContent = oldotherincome.toFixed(2);
            document.getElementById('oldregimenetothersources').textContent = oldnetothersources.toFixed(2);
            document.getElementById('newregimedividendincome').textContent = newdividendincome.toFixed(2);
            document.getElementById('newregimeinterestsavingbank').textContent = newinterestsavingbank.toFixed(2);
            document.getElementById('newregimeinterestfd').textContent = newinterestfd.toFixed(2);
            document.getElementById('newregimewinninglottery').textContent = newwinninglottery.toFixed(2);
            document.getElementById('newregimeotherincome').textContent = newotherincome.toFixed(2);
            document.getElementById('newregimenetothersources').textContent = newnetothersources.toFixed(2);

            // Income from Virtual Digital Asset
            let oldvda = Math.max(0, Number(document.getElementById('vda').value) || 0);
            let newvda = Math.max(0, Number(document.getElementById('vda').value) || 0);
            document.getElementById('oldregimevda').textContent = oldvda.toFixed(2);
            document.getElementById('oldregimenetvda').textContent = oldvda.toFixed(2);
            document.getElementById('newregimevda').textContent = newvda.toFixed(2);
            document.getElementById('newregimenetvda').textContent = newvda.toFixed(2);

            // Loss Carry Forward Calculation
            let oldnetincomehp = 0;
            let oldnetincomepgbp = 0;
            if ((oldnetprofit44ad + oldnormalbusinessincome) >= 0 && Math.max(oldnav - oldstandarddeductionhp - oldinterestletout - oldinterestselfoccupied, -200000) >= 0) {
                oldnetincomepgbp = oldnetprofit44ad + oldnormalbusinessincome;
                oldnetincomehp = Math.max(oldnav - oldstandarddeductionhp - oldinterestletout - oldinterestselfoccupied, -200000);
            } else if (oldnormalbusinessincome < 0 && Math.max(oldnav - oldstandarddeductionhp - oldinterestletout - oldinterestselfoccupied, -200000) >= 0) {
                oldnetincomepgbp = Math.max((oldnetprofit44ad + oldnormalbusinessincome), -(Math.max(oldnav - oldstandarddeductionhp - oldinterestletout - oldinterestselfoccupied, -200000) + oldnetprofit44ad + oldnetcapitalgain + oldnetothersources));
                oldnetincomehp = Math.max(oldnav - oldstandarddeductionhp - oldinterestletout - oldinterestselfoccupied, -200000);
            } else if (oldnormalbusinessincome >= 0 && Math.max(oldnav - oldstandarddeductionhp - oldinterestletout - oldinterestselfoccupied, -200000) < 0) {
                oldnetincomepgbp = oldnetprofit44ad + oldnormalbusinessincome;
                oldnetincomehp = Math.max(Math.max((oldnav - oldstandarddeductionhp) - oldinterestletout - oldinterestselfoccupied, -200000), -(oldnetsalary + oldnetprofit44ad + oldnormalbusinessincome + oldnetcapitalgain + oldnetothersources));
            } else {
                oldnetincomepgbp = Math.max((oldnetprofit44ad + oldnormalbusinessincome), -(oldnetprofit44ad + oldnetcapitalgain + oldnetothersources));
                oldnetincomehp = Math.max(Math.max((oldnav - oldstandarddeductionhp) - oldinterestletout - oldinterestselfoccupied, -200000), -(oldnetsalary + oldnetincomepgbp + oldnetcapitalgain + oldnetothersources));
            }

            let newnetincomepgbp = Math.max((newnetprofit44ad + newnormalbusinessincome), -(newnetprofit44ad + newnetcapitalgain + newnetothersources));

            let oldinterheadhpcarry = Math.max(0, -((oldnav - oldstandarddeductionhp - oldinterestletout - oldinterestselfoccupied) - oldnetincomehp));
            let newinterheadhpcarry = Math.max(0, -((newnav - newstandarddeductionhp - newinterestletout - newinterestselfoccupied) - newnetincomehp));
            let oldinterheadpgbpcarry = Math.max(0, (oldnetprofit44ad + oldnormalbusinessincome - oldnetincomepgbp));
            let newinterheadpgbpcarry = Math.max(0, (newnetprofit44ad + newnormalbusinessincome - newnetincomepgbp));
            let oldinterheadltcgcarry = Math.max(0, -Math.min((oldltcgsec112 + oldltcgsec112a + oldltcgsec112_jul + oldltcgsec112a_jul), 0));
            let newinterheadltcgcarry = Math.max(0, -Math.min((newltcgsec112 + newltcgsec112a + newltcgsec112_jul + newltcgsec112a_jul), 0));
            let oldinterheadstcgcarry = Math.max(0, -Math.min((oldstcgsec111 + oldstcgsec111a + oldstcgsec111_jul + oldstcgsec111a_jul), 0));
            let newinterheadstcgcarry = Math.max(0, -Math.min((newstcgsec111 + newstcgsec111a + newstcgsec111_jul + newstcgsec111a_jul), 0));

            document.getElementById('oldregimehploss').textContent = oldinterheadhpcarry.toFixed(2);
            document.getElementById('oldregimepgbploss').textContent = oldinterheadpgbpcarry.toFixed(2);
            document.getElementById('oldregimestcgloss').textContent = oldinterheadstcgcarry.toFixed(2);
            document.getElementById('oldregimeltcgloss').textContent = oldinterheadltcgcarry.toFixed(2);
            document.getElementById('newregimehploss').textContent = newinterheadhpcarry.toFixed(2);
            document.getElementById('newregimepgbploss').textContent = newinterheadpgbpcarry.toFixed(2);
            document.getElementById('newregimestcgloss').textContent = newinterheadstcgcarry.toFixed(2);
            document.getElementById('newregimeltcgloss').textContent = newinterheadltcgcarry.toFixed(2);

            // Update carry forward loss inputs
            document.getElementById('hploss').value = oldinterheadhpcarry;
            document.getElementById('pgbploss').value = oldinterheadpgbpcarry;
            document.getElementById('stcgloss').value = oldinterheadstcgcarry;
            document.getElementById('ltcgloss').value = oldinterheadltcgcarry;

            // Gross Total Income
            let oldgrosstotalincome = Math.max(oldnetsalary + oldnetincomehp + oldnetincomepgbp + oldnetcapitalgain + oldnetothersources + oldvda, 0);
            let newgrosstotalincome = Math.max(newnetsalary + newnetincomehp + newnetincomepgbp + newnetcapitalgain + newnetothersources + newvda, 0);

            document.getElementById('oldregimenetincomehp').textContent = oldnetincomehp.toFixed(2);
            document.getElementById('oldregimenetincomepgbp').textContent = oldnetincomepgbp.toFixed(2);
            document.getElementById('newregimenetincomehp').textContent = newnetincomehp.toFixed(2);
            document.getElementById('newregimenetincomepgbp').textContent = newnetincomepgbp.toFixed(2);
            document.getElementById('oldregimegrosstotalincome').textContent = oldgrosstotalincome.toFixed(2);
            document.getElementById('newregimegrosstotalincome').textContent = newgrosstotalincome.toFixed(2);

            // Deductions
            let olddeduction80c = Math.min(150000, Math.max(0, Number(document.getElementById('deduction80c').value) || 0));
            let olddeduction80ccc = Math.min(150000, Math.max(0, Number(document.getElementById('deduction80ccc').value) || 0));
            let olddeduction80ccd1 = Math.min(150000, Math.max(0, Number(document.getElementById('deduction80ccd1').value) || 0));
            let oldrestrictdeduction = Math.min(150000, olddeduction80c + olddeduction80ccc + olddeduction80ccd1);
            let olddeduction80ccd1b = Math.min(50000, Math.max(0, Number(document.getElementById('deduction80ccd1b').value) || 0));
            let olddeduction80ccd2 = Math.max(0, Number(document.getElementById('deduction80ccd2').value) || 0);
            let olddeduction80d = Math.min(100000, Math.max(0, Number(document.getElementById('deduction80d').value) || 0));
            let olddeduction80g = Math.max(0, Number(document.getElementById('deduction80g').value) || 0);
            let olddeduction80e = Math.max(0, Number(document.getElementById('deduction80e').value) || 0);
            let olddeduction80ee = Math.max(0, Number(document.getElementById('deduction80ee').value) || 0);
            let olddeduction80tta = Math.min(10000, Math.max(0, Number(document.getElementById('deduction80tta').value) || 0));
            let olddeduction80ttb = Math.min(50000, Math.max(0, Number(document.getElementById('deduction80ttb').value) || 0));
            let oldanyotherdeduction = Math.max(0, Number(document.getElementById('anyotherdeduction').value) || 0);
            let oldtotaldeduction = oldrestrictdeduction + olddeduction80ccd1b + olddeduction80ccd2 + olddeduction80d + olddeduction80g + olddeduction80e + olddeduction80ee + olddeduction80tta + olddeduction80ttb + oldanyotherdeduction;
            let oldeligiblededuction = Math.min(Math.max(oldgrosstotalincome - (oldstcgsec111a + oldltcgsec112 + oldltcgsec112a + oldstcgsec111a_jul + oldltcgsec112_jul + oldltcgsec112a_jul + oldwinninglottery + oldvda), 0), oldtotaldeduction);
            let oldnetincome = Math.max(oldgrosstotalincome - oldeligiblededuction, 0);

            document.getElementById('oldregimededuction80c').textContent = olddeduction80c.toFixed(2);
            document.getElementById('oldregimededuction80ccc').textContent = olddeduction80ccc.toFixed(2);
            document.getElementById('oldregimededuction80ccd1').textContent = olddeduction80ccd1.toFixed(2);
            document.getElementById('oldregimerestrictdeduction').textContent = oldrestrictdeduction.toFixed(2);
            document.getElementById('oldregimededuction80ccd1b').textContent = olddeduction80ccd1b.toFixed(2);
            document.getElementById('oldregimededuction80ccd2').textContent = olddeduction80ccd2.toFixed(2);
            document.getElementById('oldregimededuction80d').textContent = olddeduction80d.toFixed(2);
            document.getElementById('oldregimededuction80g').textContent = olddeduction80g.toFixed(2);
            document.getElementById('oldregimededuction80e').textContent = olddeduction80e.toFixed(2);
            document.getElementById('oldregimededuction80ee').textContent = olddeduction80ee.toFixed(2);
            document.getElementById('oldregimededuction80tta').textContent = olddeduction80tta.toFixed(2);
            document.getElementById('oldregimededuction80ttb').textContent = olddeduction80ttb.toFixed(2);
            document.getElementById('oldregimeanyotherdeduction').textContent = oldanyotherdeduction.toFixed(2);
            document.getElementById('oldregimetotaldeduction').textContent = oldtotaldeduction.toFixed(2);
            document.getElementById('oldregimeeligiblededuction').textContent = oldeligiblededuction.toFixed(2);
            document.getElementById('oldregimenetincome').textContent = oldnetincome.toFixed(2);

            let newdeduction80c = 0;
            let newdeduction80ccc = 0;
            let newdeduction80ccd1 = 0;
            let newrestrictdeduction = 0;
            let newdeduction80ccd1b = 0;
            let newdeduction80ccd2 = Math.max(0, Number(document.getElementById('deduction80ccd2').value) || 0);
            let newdeduction80d = 0;
            let newdeduction80g = 0;
            let newdeduction80e = 0;
            let newdeduction80ee = 0;
            let newdeduction80tta = 0;
            let newdeduction80ttb = 0;
            let newanyotherdeduction = 0;
            let newtotaldeduction = newrestrictdeduction + newdeduction80ccd1b + newdeduction80ccd2 + newdeduction80d + newdeduction80g + newdeduction80e + newdeduction80ee + newdeduction80tta + newdeduction80ttb + newanyotherdeduction;
            let neweligiblededuction = Math.min(Math.max(newgrosstotalincome - (newstcgsec111a + newltcgsec112 + newltcgsec112a + newstcgsec111a_jul + newltcgsec112_jul + newltcgsec112a_jul + newwinninglottery + newvda), 0), newtotaldeduction);
            let newnetincome = Math.max(newgrosstotalincome - neweligiblededuction, 0);

            document.getElementById('newregimededuction80c').textContent = newdeduction80c.toFixed(2);
            document.getElementById('newregimededuction80ccc').textContent = newdeduction80ccc.toFixed(2);
            document.getElementById('newregimededuction80ccd1').textContent = newdeduction80ccd1.toFixed(2);
            document.getElementById('newregimerestrictdeduction').textContent = newrestrictdeduction.toFixed(2);
            document.getElementById('newregimededuction80ccd1b').textContent = newdeduction80ccd1b.toFixed(2);
            document.getElementById('newregimededuction80ccd2').textContent = newdeduction80ccd2.toFixed(2);
            document.getElementById('newregimededuction80d').textContent = newdeduction80d.toFixed(2);
            document.getElementById('newregimededuction80g').textContent = newdeduction80g.toFixed(2);
            document.getElementById('newregimededuction80e').textContent = newdeduction80e.toFixed(2);
            document.getElementById('newregimededuction80ee').textContent = newdeduction80ee.toFixed(2);
            document.getElementById('newregimededuction80tta').textContent = newdeduction80tta.toFixed(2);
            document.getElementById('newregimededuction80ttb').textContent = newdeduction80ttb.toFixed(2);
            document.getElementById('newregimeanyotherdeduction').textContent = newanyotherdeduction.toFixed(2);
            document.getElementById('newregimetotaldeduction').textContent = newtotaldeduction.toFixed(2);
            document.getElementById('newregimeeligiblededuction').textContent = neweligiblededuction.toFixed(2);
            document.getElementById('newregimenetincome').textContent = newnetincome.toFixed(2);

            let oldroundoff = Math.round(oldnetincome / 10) * 10;
            let newroundoff = Math.round(newnetincome / 10) * 10;
            document.getElementById('oldregimeroundoff').textContent = oldroundoff.toFixed(2);
            document.getElementById('newregimeroundoff').textContent = newroundoff.toFixed(2);


            // Tax Calculations
            let oldspecialincome = Math.max(oldstcgsec111a, 0) + Math.max(oldltcgsec112, 0) + Math.max(oldltcgsec112a, 0) + 
                                  Math.max(oldstcgsec111a_jul, 0) + Math.max(oldltcgsec112_jul, 0) + Math.max(oldltcgsec112a_jul, 0) + 
                                  oldwinninglottery + oldvda;
            let oldnormalincome = oldroundoff - oldspecialincome;
            let oldtotalincome = oldnormalincome + oldspecialincome;

            let newspecialincome = Math.max(newstcgsec111a, 0) + Math.max(newltcgsec112, 0) + Math.max(newltcgsec112a, 0) + 
                                  Math.max(newstcgsec111a_jul, 0) + Math.max(newltcgsec112_jul, 0) + Math.max(newltcgsec112a_jul, 0) + 
                                  newwinninglottery + newvda;
            let newnormalincome = newroundoff - newspecialincome;
            let newtotalincome = newnormalincome + newspecialincome;

            // Old Regime Tax Calculation
            let oldnormalincometax = 0;
            let age = Number(document.getElementById('age').value) || 0;

            if (age >= 80) { // Super Senior Citizen
                if (oldnormalincome <= 500000) oldnormalincometax = 0;
                else if (oldnormalincome <= 1000000) oldnormalincometax = (oldnormalincome - 500000) * 0.20;
                else oldnormalincometax = 100000 + (oldnormalincome - 1000000) * 0.30;
            } else if (age >= 60) { // Senior Citizen
                if (oldnormalincome <= 300000) oldnormalincometax = 0;
                else if (oldnormalincome <= 500000) oldnormalincometax = (oldnormalincome - 300000) * 0.05;
                else if (oldnormalincome <= 1000000) oldnormalincometax = 10000 + (oldnormalincome - 500000) * 0.20;
                else oldnormalincometax = 110000 + (oldnormalincome - 1000000) * 0.30;
            } else { // Regular Individual
                if (oldnormalincome <= 250000) oldnormalincometax = 0;
                else if (oldnormalincome <= 500000) oldnormalincometax = (oldnormalincome - 250000) * 0.05;
                else if (oldnormalincome <= 1000000) oldnormalincometax = 12500 + (oldnormalincome - 500000) * 0.20;
                else oldnormalincometax = 112500 + (oldnormalincome - 1000000) * 0.30;
            }

            let oldspecialincometax = (Math.max(oldstcgsec111a, 0) * 0.15) + 
                                    (Math.max(oldltcgsec112, 0) * 0.20) + 
                                    (Math.max(oldltcgsec112a - 125000, 0) * 0.10) +
                                    (Math.max(oldstcgsec111a_jul, 0) * 0.20) +
                                    (Math.max(oldltcgsec112_jul, 0) * 0.125) +
                                    (Math.max(oldltcgsec112a_jul - 125000, 0) * 0.125) +
                                    (oldwinninglottery * 0.30) +
                                    (oldvda * 0.30);

            let oldtaxbeforerebate = oldnormalincometax + oldspecialincometax;
            let oldrebate87a = (oldtotalincome <= 500000 && oldtaxbeforerebate <= 12500) ? oldtaxbeforerebate : 0;
            let oldtaxbeforesurcharge = oldtaxbeforerebate - oldrebate87a;

            // New Regime Tax Calculation
            let newnormalincometax = 0;
            if (newnormalincome <= 300000) newnormalincometax = 0;
            else if (newnormalincome <= 600000) newnormalincometax = (newnormalincome - 300000) * 0.05;
            else if (newnormalincome <= 900000) newnormalincometax = 15000 + (newnormalincome - 600000) * 0.10;
            else if (newnormalincome <= 1200000) newnormalincometax = 45000 + (newnormalincome - 900000) * 0.15;
            else if (newnormalincome <= 1500000) newnormalincometax = 90000 + (newnormalincome - 1200000) * 0.20;
            else newnormalincometax = 150000 + (newnormalincome - 1500000) * 0.30;

            let newspecialincometax = (Math.max(newstcgsec111a, 0) * 0.15) + 
                                    (Math.max(newltcgsec112, 0) * 0.20) + 
                                    (Math.max(newltcgsec112a - 125000, 0) * 0.10) +
                                    (Math.max(newstcgsec111a_jul, 0) * 0.20) +
                                    (Math.max(newltcgsec112_jul, 0) * 0.125) +
                                    (Math.max(newltcgsec112a_jul - 125000, 0) * 0.125) +
                                    (newwinninglottery * 0.30) +
                                    (newvda * 0.30);

            let newtaxbeforerebate = newnormalincometax + newspecialincometax;
            let newrebate87a = (newtotalincome <= 700000 && newtaxbeforerebate <= 25000) ? newtaxbeforerebate : 0;
            let newtaxbeforesurcharge = newtaxbeforerebate - newrebate87a;

            // Surcharge Calculation
            let oldsurcharge = 0;
            if (oldtotalincome > 50000000) oldsurcharge = oldtaxbeforesurcharge * 0.25;
            else if (oldtotalincome > 20000000) oldsurcharge = oldtaxbeforesurcharge * 0.15;
            else if (oldtotalincome > 10000000) oldsurcharge = oldtaxbeforesurcharge * 0.10;
            else if (oldtotalincome > 5000000) oldsurcharge = oldtaxbeforesurcharge * 0.05;

            let newsurcharge = 0;
            if (newtotalincome > 50000000) newsurcharge = newtaxbeforesurcharge * 0.25;
            else if (newtotalincome > 20000000) newsurcharge = newtaxbeforesurcharge * 0.15;
            else if (newtotalincome > 10000000) newsurcharge = newtaxbeforesurcharge * 0.10;
            else if (newtotalincome > 5000000) newsurcharge = newtaxbeforesurcharge * 0.05;

            // Marginal Relief Calculation
            let oldmarginalrelief = 0;
            let newmarginalrelief = 0;
            let marginalReliefOption = document.getElementById('combo_list').value;

            if (marginalReliefOption === 'Govt_utility') {
                if (oldtotalincome > 5000000 && oldtotalincome <= 5100000) {
                    let excess = oldtotalincome - 5000000;
                    oldmarginalrelief = Math.max(oldsurcharge - excess, 0);
                }
                if (newtotalincome > 5000000 && newtotalincome <= 5100000) {
                    let excess = newtotalincome - 5000000;
                    newmarginalrelief = Math.max(newsurcharge - excess, 0);
                }
            }



            // Final Tax Calculation
            let oldtaxbeforecess = oldtaxbeforesurcharge + oldsurcharge - oldmarginalrelief;
            let oldcess = oldtaxbeforecess * 0.04;
            let oldgrosstaxpayable = oldtaxbeforecess + oldcess;

            let newtaxbeforecess = newtaxbeforesurcharge + newsurcharge - newmarginalrelief;
            let newcess = newtaxbeforecess * 0.04;
            let newgrosstaxpayable = newtaxbeforecess + newcess;

            // Update Display
            document.getElementById('oldregimenormalincometax').textContent = oldnormalincometax.toFixed(2);
            document.getElementById('oldregimespecialincometax').textContent = oldspecialincometax.toFixed(2);
            document.getElementById('oldregimetaxbeforerebate').textContent = oldtaxbeforerebate.toFixed(2);
            document.getElementById('oldregimerebate87a').textContent = oldrebate87a.toFixed(2);
            document.getElementById('oldregimetaxbeforesurcharge').textContent = oldtaxbeforesurcharge.toFixed(2);
            document.getElementById('oldregimesurcharge').textContent = oldsurcharge.toFixed(2);
            document.getElementById('oldregimemarginalrelief').textContent = oldmarginalrelief.toFixed(2);
            document.getElementById('oldregimetaxbeforecess').textContent = oldtaxbeforecess.toFixed(2);
            document.getElementById('oldregimecess').textContent = oldcess.toFixed(2);
            document.getElementById('oldregimegrosstaxpayable').textContent = oldgrosstaxpayable.toFixed(2);

            document.getElementById('newregimenormalincometax').textContent = newnormalincometax.toFixed(2);
            document.getElementById('newregimespecialincometax').textContent = newspecialincometax.toFixed(2);
            document.getElementById('newregimetaxbeforerebate').textContent = newtaxbeforerebate.toFixed(2);
            document.getElementById('newregimerebate87a').textContent = newrebate87a.toFixed(2);
            document.getElementById('newregimetaxbeforesurcharge').textContent = newtaxbeforesurcharge.toFixed(2);
            document.getElementById('newregimesurcharge').textContent = newsurcharge.toFixed(2);
            document.getElementById('newregimemarginalrelief').textContent = newmarginalrelief.toFixed(2);
            document.getElementById('newregimetaxbeforecess').textContent = newtaxbeforecess.toFixed(2);
            document.getElementById('newregimecess').textContent = newcess.toFixed(2);
            document.getElementById('newregimegrosstaxpayable').textContent = newgrosstaxpayable.toFixed(2);

            // Update non-editable fields
            document.getElementById('grosssalary').textContent = oldgrosssalary.toFixed(2);
            document.getElementById('standarddeduction').textContent = oldstandarddeduction.toFixed(2);
            document.getElementById('netsalary').textContent = oldnetsalary.toFixed(2);
            document.getElementById('nav').textContent = oldnav.toFixed(2);
            document.getElementById('standarddeductionhp').textContent = oldstandarddeductionhp.toFixed(2);
            document.getElementById('netincomehp').textContent = oldnetincomehp.toFixed(2);
            document.getElementById('netprofit44ad').textContent = oldnetprofit44ad.toFixed(2);
            document.getElementById('netincomepgbp').textContent = oldnetincomepgbp.toFixed(2);
            document.getElementById('netcapitalgain').textContent = oldnetcapitalgain.toFixed(2);
            document.getElementById('netothersources').textContent = oldnetothersources.toFixed(2);
            document.getElementById('netvda').textContent = oldvda.toFixed(2);
            document.getElementById('grosstotalincome').textContent = oldgrosstotalincome.toFixed(2);
            document.getElementById('restrictdeduction').textContent = oldrestrictdeduction.toFixed(2);
            document.getElementById('totaldeduction').textContent = oldtotaldeduction.toFixed(2);
            document.getElementById('eligiblededuction').textContent = oldeligiblededuction.toFixed(2);
            document.getElementById('netincome').textContent = oldnetincome.toFixed(2);
            document.getElementById('roundoff').textContent = oldroundoff.toFixed(2);
        }
    </script>
</body>
</html>
